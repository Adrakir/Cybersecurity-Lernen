<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT-Fachinformatiker Pr√ºfungssimulation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1565C0, #0D47A1);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .logo {
            width: 100px;
            height: 100px;
            background: white;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            color: #1565C0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .title {
            font-size: 2.8em;
            margin-bottom: 10px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.3em;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }

        /* Name Input Screen */
        .name-input {
            text-align: center;
        }

        .name-input h2 {
            color: #1565C0;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .input-group {
            margin: 25px 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }

        .input-group input {
            width: 100%;
            max-width: 400px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1em;
            text-align: center;
        }

        .input-group input:focus {
            outline: none;
            border-color: #1565C0;
            box-shadow: 0 0 0 3px rgba(21, 101, 192, 0.1);
        }

        /* Exam Info */
        .exam-info {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            border-left: 5px solid #1565C0;
        }

        .exam-info h3 {
            color: #1565C0;
            margin-bottom: 15px;
        }

        .exam-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-box {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e0e0e0;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #1565C0;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        /* Timer */
        .timer-container {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
        }

        .timer {
            font-size: 1.5em;
            font-weight: bold;
            color: #1565C0;
        }

        .timer.warning {
            color: #ff9800;
        }

        .timer.danger {
            color: #f44336;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Question Navigation */
        .question-nav {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-prev {
            background: #6c757d;
            color: white;
        }

        .btn-next {
            background: #28a745;
            color: white;
        }

        .btn-submit {
            background: #dc3545;
            color: white;
            font-size: 1.1em;
            padding: 12px 25px;
        }

        .btn-prev:hover:not(:disabled) { background: #5a6268; }
        .btn-next:hover:not(:disabled) { background: #218838; }
        .btn-submit:hover { background: #c82333; }

        /* Progress Bar */
        .progress-container {
            margin: 20px 0;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            background: linear-gradient(90deg, #28a745, #20c997);
            height: 100%;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-text {
            text-align: center;
            margin-top: 8px;
            font-weight: bold;
            color: #555;
        }

        /* Question Card Enhanced */
        .question-card {
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            background: white;
        }

        .category-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin-bottom: 20px;
            color: white;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .question-number {
            background: #1565C0;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
        }

        .question-image {
            width: 100%;
            height: 250px;
            background: linear-gradient(45deg, #1565C0, #42A5F5);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 80px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }

        .question-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(1px);
        }

        .question-image-content {
            position: relative;
            z-index: 2;
            text-align: center;
        }

        .question-image-title {
            font-size: 18px;
            margin-top: 10px;
            font-weight: bold;
        }

        .question-text {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 30px;
            line-height: 1.5;
            color: #333;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option {
            border: 3px solid #ddd;
            border-radius: 12px;
            padding: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            background: #fafafa;
        }

        .option:hover {
            border-color: #1565C0;
            background: #f0f7ff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(21, 101, 192, 0.2);
        }

        .option.selected {
            border-color: #1565C0;
            background: #e3f2fd;
            box-shadow: 0 0 0 2px rgba(21, 101, 192, 0.2);
        }

        .option-letter {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #1565C0;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            margin-right: 18px;
            flex-shrink: 0;
        }

        .option-text {
            flex: 1;
            font-size: 1.1em;
            line-height: 1.4;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .title {
                font-size: 2.2em;
            }
            
            .game-container {
                padding: 20px;
            }

            .question-nav {
                flex-direction: column;
                text-align: center;
            }

            .nav-buttons {
                order: 2;
            }

            .question-image {
                height: 200px;
                font-size: 60px;
            }

            .timer-container {
                position: relative;
                top: auto;
                right: auto;
                margin-bottom: 20px;
            }
        }

        .btn {
            background: #1565C0;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .btn:hover {
            background: #0D47A1;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(13, 71, 161, 0.3);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .hidden {
            display: none;
        }

        .answer-option {
            margin: 10px 0;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .answer-option:hover {
            border-color: #1565C0;
            background-color: #f0f7ff;
        }

        .answer-option input[type="radio"] {
            margin-right: 10px;
        }

        .answer-option label {
            cursor: pointer;
            width: 100%;
            display: block;
        }

        .question-image {
            text-align: center;
            margin: 20px 0;
            font-size: 4em;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            border: 3px solid #e3e8ee;
        }

        .category-badge {
            background: linear-gradient(45deg, #1565C0, #42A5F5);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            display: inline-block;
        }

        .question-navigation {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #eee;
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }

        .security-stories {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            color: white;
        }

        .story-card {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #ffd700;
        }

        .story-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        .story-content {
            line-height: 1.6;
            opacity: 0.9;
        }

        .story-navigation {
            text-align: center;
            margin-top: 20px;
        }

        .story-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
        }

        .story-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        /* Case Studies Styles */
        .case-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .case-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            border: 3px solid transparent;
        }

        .case-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border-color: #ffd700;
        }

        .case-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .case-card h3 {
            margin: 15px 0 10px 0;
            font-size: 1.3em;
        }

        .case-card p {
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .difficulty {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            display: inline-block;
        }

        .difficulty.easy { background: #27ae60; }
        .difficulty.medium { background: #f39c12; }
        .difficulty.hard { background: #e74c3c; }

        .case-progress {
            margin-bottom: 30px;
        }

        .progress-steps {
            display: flex;
            justify-content: center;
            gap: 30px;
        }

        .step {
            padding: 10px 20px;
            border-radius: 25px;
            background: #ecf0f1;
            color: #7f8c8d;
            font-weight: bold;
        }

        .step.active {
            background: #3498db;
            color: white;
        }

        .step.completed {
            background: #27ae60;
            color: white;
        }

        .case-scenario {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 5px solid #e74c3c;
        }

        .case-evidence {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin-bottom: 25px;
            max-height: 200px;
            overflow-y: auto;
        }

        .tool-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
        }

        .tool-btn {
            background: #34495e;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tool-btn:hover {
            background: #2c3e50;
            transform: translateY(-2px);
        }

        .case-questions {
            background: #fff;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .case-navigation {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
        }

        /* Team Mode Styles */
        .team-creation {
            max-width: 800px;
            margin: 0 auto;
        }

        .roles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .role-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            border: 3px solid transparent;
        }

        .role-card:hover {
            transform: translateY(-5px);
            border-color: #ffd700;
        }

        .role-card.selected {
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .role-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .selected-team {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .team-member {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9em;
        }

        /* Team Challenge Styles */
        .challenge-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
        }

        .team-score {
            font-size: 1.5em;
            font-weight: bold;
        }

        .challenge-timer {
            font-size: 2em;
            font-weight: bold;
            text-align: center;
        }

        .collaborative-tools {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .tool-station {
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
        }

        .tool-station h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }

        .advanced-tool-btn {
            background: #34495e;
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 8px;
            cursor: pointer;
            margin: 8px 5px;
            transition: all 0.3s ease;
            font-size: 0.9em;
            display: block;
            width: 100%;
        }

        .advanced-tool-btn:hover {
            background: #2c3e50;
            transform: translateY(-2px);
        }

        .findings {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            min-height: 80px;
            max-height: 150px;
            overflow-y: auto;
        }

        .team-chat {
            background: #ecf0f1;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .chat-messages {
            background: white;
            border: 1px solid #bdc3c7;
            border-radius: 8px;
            height: 200px;
            overflow-y: auto;
            padding: 15px;
            margin-bottom: 15px;
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #bdc3c7;
            border-radius: 5px;
        }

        .chat-input button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        /* Leaderboard Styles */
        .scoring-overview {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .scoring-explanation {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .score-category {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .leaderboards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .leaderboard-table {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .leaderboard-header {
            background: #3498db;
            color: white;
            padding: 15px;
            display: grid;
            grid-template-columns: 1fr 3fr 2fr 2fr;
            gap: 15px;
            font-weight: bold;
        }

        .leaderboard-row {
            padding: 15px;
            display: grid;
            grid-template-columns: 1fr 3fr 2fr 2fr;
            gap: 15px;
            border-bottom: 1px solid #ecf0f1;
            transition: background 0.3s ease;
        }

        .leaderboard-row:hover {
            background: #f8f9fa;
        }

        .rank-1 { background: linear-gradient(135deg, #ffd700, #ffed4e) !important; }
        .rank-2 { background: linear-gradient(135deg, #c0c0c0, #d3d3d3) !important; }
        .rank-3 { background: linear-gradient(135deg, #cd7f32, #deb887) !important; }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .achievement-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            position: relative;
        }

        .achievement-card.unlocked {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
        }

        .achievement-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .leaderboard-row.rank-1 {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
            font-weight: bold;
        }

        .leaderboard-row.rank-2 {
            background: linear-gradient(135deg, #c0c0c0, #e8e8e8);
            color: #333;
            font-weight: bold;
        }

        .leaderboard-row.rank-3 {
            background: linear-gradient(135deg, #cd7f32, #d4a574);
            color: #333;
            font-weight: bold;
        }

        .achievement-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            opacity: 0.6;
        }

        .achievement-card.unlocked {
            border-color: #ffd700;
            background: linear-gradient(135deg, #fff9e6, #ffffff);
            opacity: 1;
            transform: scale(1.02);
        }

        .achievement-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .role-card.selected {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.3);
        }

        .team-member {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Start Screen -->
        <div id="start-screen">
            <div class="header">
                <div class="logo">üéì</div>
                <h1 class="title">IT-Fachinformatiker</h1>
                <p class="subtitle">Pr√ºfungssimulation 2025</p>
                <p style="opacity: 0.8;">Offizielle Vorbereitung auf die IHK-Pr√ºfung</p>
            </div>
            
            <div class="game-container name-input">
                <h2>Willkommen zur Pr√ºfungssimulation</h2>
                
                <div class="exam-info">
                    <h3>üìã Pr√ºfungsdetails</h3>
                    <div class="exam-stats">
                        <div class="stat-box">
                            <div class="stat-number">12</div>
                            <div class="stat-label">Fragen insgesamt</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">2</div>
                            <div class="stat-label">Fachbereiche</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">45</div>
                            <div class="stat-label">Minuten Zeit</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">95%</div>
                            <div class="stat-label">F√ºr Zertifikat</div>
                        </div>
                    </div>
                    
                    <p><strong>Fachbereiche:</strong></p>
                    <ul style="text-align: left; margin: 15px 0; line-height: 1.8;">
                        <li>üåê Netzwerktechnik und Protokolle</li>
                        <li>ÔøΩ IT-Sicherheit und Datenschutz</li>
                    </ul>
                </div>

                <!-- Echte IT-Sicherheitsf√§lle -->
                <div class="security-stories">
                    <h3>üì∞ Aktuelle IT-Sicherheitsf√§lle</h3>
                    <p style="opacity: 0.9; margin-bottom: 20px;">
                        Echte F√§lle aus der Praxis - von lustig bis erschreckend
                    </p>
                    
                    <div class="story-card" id="current-story">
                        <div class="story-title" id="story-title">
                            üè• Krankenhaus-Hack: "Haben Sie unsere Daten verschl√ºsselt?"
                        </div>
                        <div class="story-content" id="story-content">
                            Ein Krankenhaus rief bei Cyberkriminellen an und fragte h√∂flich: 
                            "Entschuldigung, haben Sie unsere Patientendaten verschl√ºsselt? 
                            Wir k√∂nnen nicht mehr darauf zugreifen." Die Hacker waren so 
                            perplex √ºber die H√∂flichkeit, dass sie den Entschl√ºsselungskey 
                            kostenlos herausgaben.
                        </div>
                    </div>
                    
                    <div class="story-navigation">
                        <button class="story-btn" onclick="previousStory()">‚Üê Vorherige</button>
                        <span style="margin: 0 20px; opacity: 0.8;" id="story-counter">1 / 40</span>
                        <button class="story-btn" onclick="nextStory()">N√§chste ‚Üí</button>
                    </div>
                </div>
                        <li>ÔøΩ Datenbanken und Datenmodellierung</li>
                        <li>üíº Wirtschaft und Gesch√§ftsprozesse</li>
                        <li>‚öñÔ∏è Recht und Compliance</li>
                        <li>üõ†Ô∏è Projektmanagement und Methoden</li>
                        <li>üíª Programmierung und Softwareentwicklung</li>
                    </ul>
                </div>
                
                <div class="input-group">
                    <label for="participant-name">Ihr vollst√§ndiger Name:</label>
                    <input type="text" id="participant-name" placeholder="z.B. Max Mustermann" maxlength="50">
                </div>
                
                <button class="btn" id="start-btn">
                    üìù Pr√ºfung starten
                </button>

                <button class="btn" id="case-studies-btn" style="background: #e67e22; margin-top: 15px;">
                    üïµÔ∏è Interaktive Fallbeispiele
                </button>

                <button class="btn" id="team-mode-btn" style="background: #9b59b6; margin-top: 15px;">
                    üë• Team-Modus
                </button>

                <button class="btn" id="leaderboard-btn" style="background: #f39c12; margin-top: 15px;">
                    üèÜ Rangliste & Scores
                </button>
                
                <p style="margin-top: 20px; font-size: 0.9em; color: #666; line-height: 1.6;">
                    <strong>Hinweise:</strong><br>
                    ‚Ä¢ Sie haben 90 Minuten Zeit f√ºr 48 Fragen<br>
                    ‚Ä¢ Je 6 Fragen aus jedem der 8 Fachbereiche<br>
                    ‚Ä¢ Fragen k√∂nnen vor- und zur√ºckgebl√§ttert werden<br>
                    ‚Ä¢ F√ºr ein Zertifikat ben√∂tigen Sie mindestens 95% richtige Antworten
                </p>
            </div>
        </div>

        <!-- Team Mode Screen -->
        <div id="team-mode-screen" style="display: none;">
            <div class="header">
                <div class="logo">üë•</div>
                <h1 class="title">Team-Modus</h1>
                <p class="subtitle">Kollaborative Cyber-Security Challenges</p>
            </div>
            
            <div class="game-container">
                <div class="team-setup" id="team-setup">
                    <h2>Team zusammenstellen</h2>
                    
                    <div class="team-creation">
                        <div class="input-group">
                            <label for="team-name">Team-Name:</label>
                            <input type="text" id="team-name" placeholder="z.B. Cyber Guardians" maxlength="30">
                        </div>
                        
                        <div class="team-roles">
                            <h3>üé≠ Rollen ausw√§hlen (2-4 Spieler):</h3>
                            <div class="roles-grid">
                                <div class="role-card" onclick="selectRole('incident-commander')">
                                    <div class="role-icon">üéØ</div>
                                    <h4>Incident Commander</h4>
                                    <p>Leitet die Response, trifft finale Entscheidungen</p>
                                </div>
                                
                                <div class="role-card" onclick="selectRole('forensic-analyst')">
                                    <div class="role-icon">üîç</div>
                                    <h4>Forensic Analyst</h4>
                                    <p>Analysiert Logs, sammelt Beweise</p>
                                </div>
                                
                                <div class="role-card" onclick="selectRole('security-engineer')">
                                    <div class="role-icon">üõ°Ô∏è</div>
                                    <h4>Security Engineer</h4>
                                    <p>Implementiert Gegenma√ünahmen</p>
                                </div>
                                
                                <div class="role-card" onclick="selectRole('communications')">
                                    <div class="role-icon">üì¢</div>
                                    <h4>Communications</h4>
                                    <p>Stakeholder-Kommunikation, PR</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="selected-team" id="selected-team">
                            <h3>Ihr Team:</h3>
                            <div id="team-members"></div>
                        </div>
                        
                        <button class="btn" onclick="startTeamChallenge()" id="start-team-btn" style="display: none;">
                            üöÄ Team-Challenge starten
                        </button>
                    </div>
                </div>

                <!-- Team Challenge Interface -->
                <div class="team-challenge" id="team-challenge" style="display: none;">
                    <div class="challenge-header">
                        <div class="team-info">
                            <h2 id="team-display-name">Team Name</h2>
                            <div class="team-score">Score: <span id="team-score">0</span></div>
                        </div>
                        <div class="challenge-timer">
                            <div id="challenge-timer">30:00</div>
                        </div>
                    </div>

                    <div class="collaborative-tools">
                        <div class="tool-station" id="forensics-station">
                            <h3>üîç Forensics Station</h3>
                            <div class="station-content">
                                <button class="advanced-tool-btn" onclick="deepLogAnalysis()">üìä Deep Log Analysis</button>
                                <button class="advanced-tool-btn" onclick="malwareReverse()">üß¨ Malware Reverse Engineering</button>
                                <button class="advanced-tool-btn" onclick="memoryDump()">üíæ Memory Dump Analysis</button>
                            </div>
                            <div class="findings" id="forensics-findings"></div>
                        </div>

                        <div class="tool-station" id="network-station">
                            <h3>üåê Network Operations</h3>
                            <div class="station-content">
                                <button class="advanced-tool-btn" onclick="networkTopology()">üó∫Ô∏è Network Topology Map</button>
                                <button class="advanced-tool-btn" onclick="trafficAnalysis()">üìà Traffic Analysis</button>
                                <button class="advanced-tool-btn" onclick="threatHunting()">üéØ Threat Hunting</button>
                            </div>
                            <div class="findings" id="network-findings"></div>
                        </div>

                        <div class="tool-station" id="intelligence-station">
                            <h3>üß† Threat Intelligence</h3>
                            <div class="station-content">
                                <button class="advanced-tool-btn" onclick="oscintLookup()">üîé OSINT Lookup</button>
                                <button class="advanced-tool-btn" onclick="iocAnalysis()">‚ö†Ô∏è IOC Analysis</button>
                                <button class="advanced-tool-btn" onclick="attributionAnalysis()">üè¥ Attribution Analysis</button>
                            </div>
                            <div class="findings" id="intelligence-findings"></div>
                        </div>

                        <div class="tool-station" id="response-station">
                            <h3>‚ö° Incident Response</h3>
                            <div class="station-content">
                                <button class="advanced-tool-btn" onclick="containmentPlan()">üöß Containment Plan</button>
                                <button class="advanced-tool-btn" onclick="stakeholderComms()">üì¢ Stakeholder Comms</button>
                                <button class="advanced-tool-btn" onclick="recoveryPlan()">üîÑ Recovery Plan</button>
                            </div>
                            <div class="findings" id="response-findings"></div>
                        </div>
                    </div>

                    <div class="team-chat">
                        <h3>üí¨ Team Chat</h3>
                        <div class="chat-messages" id="chat-messages"></div>
                        <div class="chat-input">
                            <input type="text" id="chat-input" placeholder="Nachrichten an Team...">
                            <button onclick="sendTeamMessage()">Send</button>
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="backToStart()" style="margin-top: 30px;">
                    üè† Zur√ºck zur Startseite
                </button>
            </div>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboard-screen" style="display: none;">
            <div class="header">
                <div class="logo">üèÜ</div>
                <h1 class="title">Rangliste & Scores</h1>
                <p class="subtitle">Die besten Cyber-Security-Experten</p>
            </div>
            
            <div class="game-container">
                <div class="scoring-overview">
                    <h2>üìä Scoring-System</h2>
                    <div class="scoring-explanation">
                        <div class="score-category">
                            <h4>üéØ Fallbeispiele (Einzelspieler)</h4>
                            <ul>
                                <li>Anf√§nger-Fall: 100-300 Punkte</li>
                                <li>Mittel-Fall: 300-600 Punkte</li>
                                <li>Experte-Fall: 600-1000 Punkte</li>
                                <li>Bonus: Zeitbonus, Tool-Nutzung</li>
                            </ul>
                        </div>
                        <div class="score-category">
                            <h4>üë• Team-Challenges</h4>
                            <ul>
                                <li>Kollaboration: 200-500 Punkte</li>
                                <li>Kommunikation: 100-300 Punkte</li>
                                <li>L√∂sungsqualit√§t: 300-800 Punkte</li>
                                <li>Zeit-Performance: 100-400 Punkte</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="leaderboards">
                    <div class="leaderboard-section">
                        <h3>ü•á Top Einzelspieler</h3>
                        <div class="leaderboard-table">
                            <div class="leaderboard-header">
                                <span>Rang</span>
                                <span>Name</span>
                                <span>Score</span>
                                <span>F√§lle gel√∂st</span>
                            </div>
                            <div id="individual-leaderboard">
                                <!-- Wird dynamisch gef√ºllt -->
                            </div>
                        </div>
                    </div>

                    <div class="leaderboard-section">
                        <h3>üë• Top Teams</h3>
                        <div class="leaderboard-table">
                            <div class="leaderboard-header">
                                <span>Rang</span>
                                <span>Team</span>
                                <span>Score</span>
                                <span>Challenges</span>
                            </div>
                            <div id="team-leaderboard">
                                <!-- Wird dynamisch gef√ºllt -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="achievements">
                    <h3>üèÖ Achievements</h3>
                    <div class="achievements-grid" id="achievements-grid">
                        <!-- Wird dynamisch gef√ºllt -->
                    </div>
                </div>

                <button class="btn" onclick="backToStart()" style="margin-top: 30px;">
                    üè† Zur√ºck zur Startseite
                </button>
            </div>
        </div>

        <!-- Case Studies Screen -->
        <div id="case-studies-screen" style="display: none;">
            <div class="header">
                <div class="logo">üïµÔ∏è</div>
                <h1 class="title">Interaktive Fallbeispiele</h1>
                <p class="subtitle">Echte IT-Sicherheitsf√§lle zum L√∂sen</p>
            </div>
            
            <div class="game-container">
                <div class="case-selection" id="case-selection">
                    <h2>W√§hlen Sie einen Fall zum Bearbeiten:</h2>
                    
                    <div class="case-grid">
                        <div class="case-card" onclick="startCase(0)">
                            <div class="case-icon">üè•</div>
                            <h3>WannaCry Krankenhaus</h3>
                            <p>Ransomware legt Klinik lahm</p>
                            <div class="difficulty easy">Anf√§nger</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(1)">
                            <div class="case-icon">üè¢</div>
                            <h3>Target Datenleck</h3>
                            <p>40 Millionen Kreditkarten gestohlen</p>
                            <div class="difficulty medium">Mittel</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(2)">
                            <div class="case-icon">‚ö°</div>
                            <h3>Ukraine Stromausfall</h3>
                            <p>Cyberkrieg gegen Infrastruktur</p>
                            <div class="difficulty hard">Experte</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(3)">
                            <div class="case-icon">üìß</div>
                            <h3>CEO-Fraud Betrug</h3>
                            <p>5 Millionen Euro durch Deepfake</p>
                            <div class="difficulty medium">Mittel</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(4)">
                            <div class="case-icon">üí£</div>
                            <h3>Stuxnet Wurm</h3>
                            <p>Cyberwaffe gegen Atomanlage</p>
                            <div class="difficulty hard">Experte</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(5)">
                            <div class="case-icon">üåê</div>
                            <h3>SolarWinds Hack</h3>
                            <p>Supply Chain Angriff auf 18.000 Unternehmen</p>
                            <div class="difficulty hard">Experte</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(6)">
                            <div class="case-icon">üèõÔ∏è</div>
                            <h3>Equifax Datenleck</h3>
                            <p>147 Millionen Identit√§ten gestohlen</p>
                            <div class="difficulty medium">Mittel</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(7)">
                            <div class="case-icon">üéÆ</div>
                            <h3>Sony PlayStation Hack</h3>
                            <p>77 Millionen Gamer-Accounts kompromittiert</p>
                            <div class="difficulty medium">Mittel</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(8)">
                            <div class="case-icon">üçé</div>
                            <h3>iCloud Celebrity Hack</h3>
                            <p>Private Fotos von Prominenten geleakt</p>
                            <div class="difficulty easy">Anf√§nger</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(9)">
                            <div class="case-icon">üö¢</div>
                            <h3>Maersk NotPetya Angriff</h3>
                            <p>Weltgr√∂√üte Reederei 10 Tage offline</p>
                            <div class="difficulty hard">Experte</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(10)">
                            <div class="case-icon">üíä</div>
                            <h3>Pharma Ransomware</h3>
                            <p>COVID-Impfstoff-Forschung blockiert</p>
                            <div class="difficulty medium">Mittel</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(11)">
                            <div class="case-icon">üèõÔ∏è</div>
                            <h3>OPM Hack</h3>
                            <p>21 Millionen Regierungsangestellte</p>
                            <div class="difficulty hard">Experte</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(12)">
                            <div class="case-icon">üçî</div>
                            <h3>McDonald's App Hack</h3>
                            <p>Indien: 2,2 Millionen Nutzer betroffen</p>
                            <div class="difficulty easy">Anf√§nger</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(13)">
                            <div class="case-icon">üéì</div>
                            <h3>Universit√§ts-Ransomware</h3>
                            <p>Pr√ºfungen fallen aus, Semester in Gefahr</p>
                            <div class="difficulty medium">Mittel</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(14)">
                            <div class="case-icon">üí≥</div>
                            <h3>Capital One Hack</h3>
                            <p>100 Millionen Kreditkartenantr√§ge</p>
                            <div class="difficulty medium">Mittel</div>
                        </div>
                        
                        <div class="case-card" onclick="startCase(15)">
                            <div class="case-icon">üè•</div>
                            <h3>D√ºsseldorf Klinik</h3>
                            <p>Erstes Ransomware-Todesopfer?</p>
                            <div class="difficulty hard">Experte</div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Case Study Interface -->
                <div class="case-interface" id="case-interface" style="display: none;">
                    <div class="case-progress">
                        <div class="progress-steps">
                            <span class="step active" id="step-1">1. Analyse</span>
                            <span class="step" id="step-2">2. Ma√ünahmen</span>
                            <span class="step" id="step-3">3. Pr√§vention</span>
                        </div>
                    </div>

                    <div class="case-content">
                        <div class="case-scenario" id="case-scenario">
                            <!-- Szenario wird hier geladen -->
                        </div>

                        <div class="case-evidence" id="case-evidence">
                            <!-- Beweise/Logs werden hier angezeigt -->
                        </div>

                        <div class="case-tools">
                            <h3>üõ†Ô∏è Verf√ºgbare Tools:</h3>
                            <div class="tool-buttons">
                                <button class="tool-btn" onclick="analyzeLog()">üìä Log-Analyse</button>
                                <button class="tool-btn" onclick="checkNetwork()">üåê Netzwerk-Scan</button>
                                <button class="tool-btn" onclick="forensics()">üîç Forensik</button>
                                <button class="tool-btn" onclick="timeline()">‚è∞ Timeline</button>
                            </div>
                        </div>

                        <div class="case-questions" id="case-questions">
                            <!-- Interaktive Fragen werden hier angezeigt -->
                        </div>

                        <div class="case-navigation">
                            <button class="nav-btn" onclick="backToSelection()">‚Üê Zur√ºck zur Auswahl</button>
                            <button class="nav-btn" onclick="nextStep()" id="next-step-btn">Weiter ‚Üí</button>
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="backToStart()" style="margin-top: 30px;">
                    üè† Zur√ºck zur Startseite
                </button>
            </div>
        </div>

        <!-- Exam Screen -->
        <div id="exam-screen" style="display: none;">
            <!-- Timer -->
            <div class="timer-container">
                <div class="timer" id="timer">45:00</div>
                <div style="font-size: 0.8em; color: #666;">verbleibend</div>
            </div>

                
                <div style="text-align: center;">
                    <div style="font-weight: bold; margin-bottom: 5px; color: #1565C0;">
                        Kandidat: <span id="display-name"></span>
                    </div>
                </div>
            </div>

            <!-- Progress -->
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-bar"></div>
                </div>
                <div class="progress-text" id="progress-text">
                    0 von 12 Fragen beantwortet
                </div>
            </div>

            <!-- Question Card -->
            <div class="question-card">
                <div class="question-header">
                    <div class="question-number" id="question-number">Frage 1</div>
                    <div class="category-badge" id="category-badge">
                        üåê Netzwerktechnik
                    </div>
                </div>

                <div class="question-image" id="question-image">
                    <!-- Hier werden die Grafiken angezeigt -->
                </div>

                <div class="question-text" id="question-text">
                    Frage wird geladen...
                </div>

                <div class="answers" id="answers-container">
                    <!-- Antworten werden hier eingef√ºgt -->
                </div>

                <!-- Navigation unter den Fragen -->
                <div class="question-navigation">
                    <button class="nav-btn btn-prev" id="prev-btn">
                        ‚Üê Zur√ºck
                    </button>
                    <button class="nav-btn btn-next" id="next-btn">
                        Weiter ‚Üí
                    </button>
                    <button class="nav-btn btn-finish" id="finish-btn" style="display: none;">
                        ‚úì Pr√ºfung beenden
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" style="display: none;">
            <div class="header">
                <div class="logo">üéì</div>
                <h1 class="title">Pr√ºfungsergebnis</h1>
            </div>
            
            <div class="game-container">
                <h2 id="result-message">Ergebnis wird berechnet...</h2>
                
                <div class="exam-stats">
                    <div class="stat-box">
                        <div class="stat-number" id="final-score">0/12</div>
                        <div class="stat-label">Richtige Antworten</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="exam-duration">0</div>
                        <div class="stat-label">Minuten ben√∂tigt</div>
                    </div>
                </div>

                <div id="certificate" style="display: none;">
                    <!-- Zertifikat wird hier angezeigt -->
                </div>

                <button class="btn" id="restart-btn">
                    üîÑ Neue Pr√ºfung starten
                </button>
            </div>
        </div>
                    <div class="question-image-content">
                        <div style="font-size: 80px;">üñ•Ô∏è</div>
                        <div class="question-image-title">IT-Systeme</div>
                    </div>
                </div>

                <div class="question-text" id="examQuestionText">
                    Frage wird geladen...
                </div>

                <div class="options" id="examOptionsContainer">
                    <!-- Options werden hier eingef√ºgt -->
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="hidden">
            <div class="header">
                <div class="logo" id="resultLogo">üèÜ</div>
                <h1 class="title">Pr√ºfung abgeschlossen!</h1>
                <p class="subtitle" id="resultSubtitle">Ihre Leistung wird ausgewertet...</p>
            </div>
            
            <div class="game-container results">
                <div id="certificateSection" class="hidden">
                    <div style="background: linear-gradient(45deg, #ffd700, #ffed4e); padding: 30px; border-radius: 15px; margin: 20px 0; border: 3px solid #daa520;">
                        <h2 style="color: #b8860b; margin-bottom: 15px;">ÔøΩ HERZLICHEN GL√úCKWUNSCH! üéâ</h2>
                        <h3 style="color: #b8860b;">Sie haben das IHK-Vorbereitungszertifikat erhalten!</h3>
                        <p style="color: #8b7355; margin-top: 10px;">Mit 95%+ sind Sie bestens f√ºr die echte Pr√ºfung vorbereitet.</p>
                    </div>
                </div>

                <div class="exam-stats" style="margin: 30px 0;">
                    <div class="stat-box">
                        <div class="stat-number" id="finalCorrectAnswers">0</div>
                        <div class="stat-label">Richtige Antworten</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="finalPercentage">0%</div>
                        <div class="stat-label">Erfolgsquote</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="finalTime">00:00</div>
                        <div class="stat-label">Ben√∂tigte Zeit</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="finalGrade">0</div>
                        <div class="stat-label">Note</div>
                    </div>
                </div>

                <div id="detailedResults">
                    <h3 style="margin: 25px 0 15px 0; color: #1565C0;">üìä Detailauswertung nach Fachbereichen</h3>
                    <div id="categoryResults"></div>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="restartExam()" style="margin-right: 10px; width: auto; display: inline-block;">
                        üîÑ Neue Pr√ºfung
                    </button>
                    <button class="btn" onclick="printCertificate()" id="printBtn" style="width: auto; display: inline-block; background: #28a745;">
                        üñ®Ô∏è Zertifikat drucken
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="examData.js"></script>
    <script src="examEngine.js"></script>
    <script>
        // Pr√ºfung starten
        function startExam() {
            const nameInput = document.getElementById('participant-name');
            const name = nameInput.value.trim();
            
            if (name.length < 2) {
                alert('Bitte geben Sie einen g√ºltigen Namen ein (mindestens 2 Zeichen).');
                return;
            }
            
            examEngine.initializeExam(name);
        }

        // Neue Pr√ºfung starten
        function restartExam() {
            location.reload();
        }

        // Zertifikat drucken
        function printCertificate() {
            window.print();
        }

        // IT-Sicherheitsstorys
        const securityStories = [
            {
                title: "üè• Krankenhaus-Hack: 'Haben Sie unsere Daten verschl√ºsselt?'",
                content: "Ein Krankenhaus rief bei Cyberkriminellen an und fragte h√∂flich: 'Entschuldigung, haben Sie unsere Patientendaten verschl√ºsselt? Wir k√∂nnen nicht mehr darauf zugreifen.' Die Hacker waren so perplex √ºber die H√∂flichkeit, dass sie den Entschl√ºsselungskey kostenlos herausgaben."
            },
            {
                title: "üí∞ Der 81-Millionen-Euro-Tippfehler",
                content: "Ein Bankangestellter wollte 64 Euro √ºberweisen, vertippte sich aber und √ºberwies 64 Millionen Euro. Das System erkannte den Fehler nicht, weil es Sonntag war und die √úberweisung erst am Montag verarbeitet wurde. Gl√ºcklicherweise konnte der Fehler rechtzeitig korrigiert werden."
            },
            {
                title: "üîê Das Passwort war... 'password123'",
                content: "Ein globaler Technologiekonzern wurde gehackt, weil der Administrator das Passwort 'password123' f√ºr den Hauptserver verwendete. Der Hack wurde erst entdeckt, als Bitcoin-Mining-Software den Server so verlangsamte, dass Mitarbeiter sich beschwerten."
            },
            {
                title: "üìß Phishing-Mail an Cybersecurity-Experten",
                content: "Hacker versendeten eine Phishing-Mail an IT-Sicherheitsexperten mit dem Betreff 'Ihr System wurde gehackt'. Die Ironie: Die Mail enthielt so viele Rechtschreibfehler, dass die Experten sie sofort als Beispiel f√ºr schlechtes Phishing in ihre Schulungen aufnahmen."
            },
            {
                title: "üè¢ Der USB-Stick-Trick im B√ºro",
                content: "Ein Penetration-Tester lies USB-Sticks mit der Aufschrift 'Gehaltsabrechnung 2024' auf dem Firmenparkplatz liegen. 90% der Mitarbeiter steckten die Sticks in ihre Arbeitscomputer. Der Stick installierte eine harmlose Software, die nur eine Nachricht anzeigte: 'Sie sind gehackt worden - bitte zur IT-Schulung melden.'"
            },
            {
                title: "üçï Pizza-Bestellung f√ºhrt zu Millionen-Schaden",
                content: "Ein Hacker bestellte Pizza an die Adresse eines Unternehmens und gab sich als Lieferant aus. Der Sicherheitsdienst lie√ü ihn ins Geb√§ude, wo er einen USB-Stick an einen Computer anschloss. Das Unternehmen verlor dadurch Kundendaten im Wert von 50 Millionen Euro."
            },
            {
                title: "üéÆ Gamer hackt Pentagon mit Nintendo DS",
                content: "Ein 15-j√§hriger Gamer schaffte es, mit seinem Nintendo DS in das Pentagon-Netzwerk einzudringen. Er nutzte eine Sicherheitsl√ºcke im WiFi-System und lud Videospiel-Cheats herunter. Das Pentagon musste daraufhin seine gesamte WiFi-Infrastruktur √ºberarbeiten."
            },
            {
                title: "üöó Auto-Hack: Hacker √ºbernimmt Fahrzeugsteuerung",
                content: "Sicherheitsexperten hackten ein Auto w√§hrend der Fahrt und √ºbernahmen Lenkung, Bremsen und Radio. Der Fahrer h√∂rte pl√∂tzlich Heavy Metal auf voller Lautst√§rke, w√§hrend das Auto eigenst√§ndig in Richtung Autobahnausfahrt lenkte. Der Test f√ºhrte zum R√ºckruf von 1,4 Millionen Fahrzeugen."
            },
            {
                title: "ü§ñ Chatbot wird zum Rassisten",
                content: "Microsoft startete einen AI-Chatbot namens 'Tay' auf Twitter, der von Nutzern lernen sollte. Innerhalb von 24 Stunden verwandelten Trolle den Bot in einen rassistischen Extremisten. Microsoft musste den Bot offline nehmen und entschuldigte sich √∂ffentlich."
            },
            {
                title: "üí° Smart-Gl√ºhbirne spioniert Nachbarn aus",
                content: "Ein IT-Experte entdeckte, dass seine smarte LED-Gl√ºhbirne heimlich WLAN-Passw√∂rter seiner Nachbarn sammelte und an chinesische Server sendete. Die Gl√ºhbirne kostete nur 8 Euro, enthielt aber einen vollwertigen Computer mit Spionage-Software."
            },
            {
                title: "üè¶ Bank-R√§uber nutzen SWIFT-Netzwerk",
                content: "Hacker stahlen 951 Millionen Dollar von der Bangladesh Bank, indem sie gef√§lschte SWIFT-Nachrichten sendeten. Ein Tippfehler ('fandation' statt 'foundation') machte eine √úberweisung verd√§chtig und verhinderte den Diebstahl weiterer 850 Millionen Dollar."
            },
            {
                title: "üì± Handy-Kamera filmt heimlich PIN-Eingaben",
                content: "Eine scheinbar harmlose Taschenlampen-App nutzte die Handy-Kamera, um PIN-Eingaben an Geldautomaten zu filmen. Die App erkannte anhand der Handbewegungen die eingegebenen Zahlen und sendete sie an Kriminelle. 50.000 Bankkonten wurden kompromittiert."
            },
            {
                title: "üé≠ Deepfake-CEO f√ºhrt zu 220.000‚Ç¨ Betrug",
                content: "Kriminelle erstellten mit KI eine t√§uschend echte Stimme des CEOs und riefen den Finanzchef an. Sie √ºberzeugten ihn, 220.000 Euro 'dringend' zu √ºberweisen. Erst sp√§ter stellte sich heraus, dass der echte CEO im Urlaub war und nie angerufen hatte."
            },
            {
                title: "üñ•Ô∏è Hacker nutzt Smart-K√ºhlschrank f√ºr Angriff",
                content: "Ein Hacker verwandelte 100.000 Smart-K√ºhlschr√§nke in ein Botnetz und startete einen DDoS-Angriff. Die K√ºhlschr√§nke sendeten gleichzeitig Millionen von Anfragen an einen Server und legten das Internet in mehreren St√§dten lahm. Die Besitzer merkten nichts - ihr Eis blieb gefroren."
            },
            {
                title: "üî• Kernkraftwerk durch USB-Stick infiziert",
                content: "Das iranische Kernkraftwerk Natanz wurde durch den Stuxnet-Virus angegriffen, der √ºber einen USB-Stick eingeschleust wurde. Der Virus zerst√∂rte 1.000 Zentrifugen zur Urananreicherung und setzte das Atomprogramm um Jahre zur√ºck."
            },
            {
                title: "üéØ Hacker verkauft eigene Identit√§t",
                content: "Ein Hacker bot seine eigenen pers√∂nlichen Daten im Darkweb zum Verkauf an - inklusive Sozialversicherungsnummer und Bankdaten. Als die Polizei ihn verhaftete, stellte sich heraus, dass er das gemacht hatte, um zu beweisen, wie unsicher Identit√§tsdatenbanken sind."
            },
            {
                title: "üöÅ Drohne hackt sich selbst",
                content: "Eine Sicherheitsdrohne einer Firma wurde so programmiert, dass sie Eindringlinge erkennt. Durch einen Programmierfehler identifizierte sie sich selbst als Bedrohung und versuchte sich stundenlang selbst zu verfolgen, bis der Akku leer war."
            },
            {
                title: "üé∞ Casino durch Smartwatch gehackt",
                content: "Ein Hacker nutzte seine Smartwatch, um die Kameras eines Casinos zu manipulieren. Er sendete Infrarot-Signale, die die √úberwachungskameras vor√ºbergehend blendeten, und gewann 500.000 Euro am Roulette-Tisch, bevor der Betrug auffiel."
            },
            {
                title: "üìª Radio-Hack l√∂st Massenpanik aus",
                content: "Hacker √ºbernahmen ein Radiosender-System und sendeten eine gef√§lschte Katastrophenwarnung √ºber einen Meteoriteneinschlag. 50.000 Menschen verlie√üen panisch die Stadt, bevor klar wurde, dass es sich um einen Hoax handelte. Der Schaden betrug 10 Millionen Euro."
            },
            {
                title: "üõ∏ NASA-Hack mit 15 Jahren",
                content: "Ein 15-j√§hriger Sch√ºler hackte sich in NASA-Computer und lud 1,7 GB streng geheimer Daten herunter, darunter Pl√§ne f√ºr eine Raumstation im Wert von 1,7 Milliarden Dollar. Er wollte nur beweisen, dass er es kann. NASA musste 21 Tage lang alle Computer abschalten."
            },
            {
                title: "üèß Geldautomat spuckt endlos Geld aus",
                content: "Hacker manipulierten einen Geldautomaten so, dass er kontinuierlich 20-Euro-Scheine ausspuckte - insgesamt 400.000 Euro in 2 Stunden. Passanten bildeten eine Schlange und f√ºllten Taschen und Rucks√§cke. Die Bank bemerkte den Fehler erst am n√§chsten Tag."
            },
            {
                title: "üé™ Hacker √ºbernimmt Zirkus-Lichtshow",
                content: "Cyberkriminelle hackten die LED-Lichtshow eines Zirkus und programmierten sie so um, dass sie Werbung f√ºr Bitcoin anzeigten. 5.000 Zuschauer sahen verwirrt zu, wie Elefanten von blinkenden 'KAUFT BITCOIN!'-Schriftz√ºgen umgeben waren."
            },
            {
                title: "üöø Smart-Dusche wird zur Abh√∂ranlage",
                content: "Ein Smart-Home-System wurde gehackt, und die Kriminellen nutzten die Mikrofone in smarten Duschen als Abh√∂ranlage. Sie belauschten Gesch√§ftsgespr√§che, die unter der Dusche gef√ºhrt wurden, und verkauften Insider-Informationen an der B√∂rse."
            },
            {
                title: "üé¨ Filmstudio erpresst sich selbst",
                content: "Hacker drohten damit, einen unreleased Film ins Internet zu stellen, falls das Studio nicht 100 Millionen Dollar zahlt. Sp√§ter stellte sich heraus, dass der 'Hack' vom Marketing-Team inszeniert wurde, um Aufmerksamkeit f√ºr den Film zu generieren."
            },
            {
                title: "üêï Hunde-Chip f√ºhrt zu Datenleck",
                content: "Ein Veterin√§r-System wurde gehackt, und Kriminelle erhielten Zugang zu den Mikrochip-Daten von 2 Millionen Haustieren. Sie nutzten die Adressdaten, um zu erfahren, welche H√§user teuer Hunde besitzen, und planten entsprechende Einbr√ºche."
            },
            {
                title: "üöÄ SpaceX-Hack durch Praktikant",
                content: "Ein Praktikant bei SpaceX verga√ü, sein Laptop zu sperren und ging zum Mittagessen. Kollegen 'hackten' sich ein und √§nderten die Raketen-Koordinaten so, dass die n√§chste Mission zum Mond statt zur ISS f√ºhren sollte. Elon Musk fand es so lustig, dass er dem Praktikanten einen Job anbot."
            },
            {
                title: "üçî McDonald's-App bestellt f√ºr ganze Stadt",
                content: "Ein Fehler in der McDonald's-App f√ºhrte dazu, dass automatisch f√ºr jeden Nutzer in Berlin 1.000 Big Macs bestellt wurden. 3,7 Millionen Burger wurden in 2 Stunden geordert. McDonald's musste alle Restaurants in der Stadt schlie√üen und bot kostenloses Essen f√ºr eine Woche an."
            },
            {
                title: "üéµ Spotify wird zu Geheimdienst-Tool",
                content: "Hacker nutzten Spotify-Playlists, um verschl√ºsselte Nachrichten zu √ºbertragen. Die Reihenfolge der Lieder enthielt Codes f√ºr Bankdaten. 'Dancing Queen' bedeutete '√úberweisung best√§tigt'. Der Hack wurde nur entdeckt, weil ein Ermittler die merkw√ºrdigen Playlists bemerkte."
            },
            {
                title: "üè† Smart-T√ºrklingel spioniert Nachbarschaft aus",
                content: "Eine Ring-Doorbell wurde so gehackt, dass sie nicht nur das eigene Haus √ºberwachte, sondern auch alle anderen Klingeln in der Stra√üe. Der Hacker erstellte eine Live-Reality-Show namens 'Desperate Housewives Real' und streamte das Leben der Nachbarn 3 Monate lang."
            },
            {
                title: "üéÆ Fortnite-Cheat entpuppt sich als Spyware",
                content: "Ein beliebter Fortnite-Cheat wurde 2 Millionen Mal heruntergeladen. In Wahrheit war es Spyware, die Hausaufgaben von Sch√ºlern stahl und sie an Konkurrenten verkaufte. 500.000 Kinder bekamen schlechtere Noten, weil ihre Mitsch√ºler die gleichen Antworten hatten."
            },
            {
                title: "üì± Teenager hackt Schulnoten mit Magneten",
                content: "Ein 16-J√§hriger brachte starke Neodym-Magneten zur Schule und l√∂schte damit alle Festplatten im Lehrerzimmer. Da keine Backups existierten, musste die gesamte Schule das Schuljahr wiederholen. Der Sch√ºler wurde zur Legende, bekam aber 200 Stunden Sozialdienst."
            },
            {
                title: "üöÅ Polizei-Drohne wird zum Drogen-Taxi",
                content: "Hacker √ºbernahmen eine Polizei-Drohne und nutzten sie 6 Monate lang als Drogen-Lieferservice. Die Polizei wunderte sich, warum die Drohne immer wieder 'Routinepatrouillen' zu den gleichen Adressen flog. Der Hack wurde entdeckt, als die Drohne bei einer Live-Pressekonferenz Marihuana abwarf."
            },
            {
                title: "üè• Herzschrittmacher-Hack rettet Leben",
                content: "Ein ethischer Hacker entdeckte, dass Herzschrittmacher remote gehackt werden k√∂nnen. Statt sie zu manipulieren, korrigierte er heimlich fehlerhafte Einstellungen bei 300 Patienten und rettete vermutlich 50 Leben. Die Krankenh√§user erfuhren davon erst durch eine anonyme E-Mail."
            },
            {
                title: "üé™ Hacker verwandelt Werbetafeln in Videospiel",
                content: "Ein Hacker programmierte alle digitalen Werbetafeln in Tokyo so um, dass sie zusammen ein riesiges Tetris-Spiel bildeten. Passanten konnten mit ihren Handys mitspielen. Die Stadt lie√ü das Spiel 3 Tage laufen, weil es so beliebt war - bis ein Rekord-Score alle Bildschirme zum Absturz brachte."
            },
            {
                title: "üöó Tesla f√§hrt autonom zur Werkstatt",
                content: "Ein Tesla-Besitzer wachte auf und stellte fest, dass sein Auto √ºber Nacht 200 km zur n√§chsten Tesla-Werkstatt gefahren war - ohne ihn. Hacker hatten das Auto gehackt und einen 'Wellness-Check' programmiert. Das Auto hatte tats√§chlich einen Defekt, der so fr√ºhzeitig entdeckt wurde."
            },
            {
                title: "üì∫ Smart-TV wird zur Wahlurne",
                content: "W√§hrend einer TV-Debatte hackten Aktivisten 50.000 Smart-TVs und lie√üen die Zuschauer live √ºber die Antworten der Politiker abstimmen. Die Ergebnisse wurden in Echtzeit √ºber die TV-Bilder eingeblendet. Die Politiker wussten nicht, warum das Publikum bei manchen Antworten lachte."
            },
            {
                title: "üéØ Dating-App wird zur Spionage-Plattform",
                content: "Eine beliebte Dating-App namens 'LoveLink' war in Wahrheit ein Spionage-Tool eines fremden Geheimdienstes. Sie sammelte intime Details von 2 Millionen Nutzern, darunter Politiker und Milit√§rangeh√∂rige. Das Schlimmste: Die App hatte eine 95% Erfolgsquote bei Dates - niemand wollte sie l√∂schen."
            },
            {
                title: "üè™ Supermarkt-Scanner √ºbernehmen Weltherrschaft",
                content: "Hacker programmierten Supermarkt-Scanner so um, dass sie nur noch vegane Produkte akzeptierten. Fleisch und Milchprodukte wurden mit 'UMWELTS√úNDE' gescannt. 500 Superm√§rkte waren betroffen. Der Umsatz veganer Produkte stieg um 2000%, bevor der Hack behoben wurde."
            },
            {
                title: "üå°Ô∏è Wetterstation prophezeit Zombie-Apokalypse",
                content: "Hacker √ºbernahmen das Wetterwarnsystem und sendeten Warnungen vor 'starkem Zombiefall mit Windgeschwindigkeiten bis 80 km/h'. 100.000 Menschen bekamen Push-Nachrichten. Superm√§rkte verkauften aus Sicherheitsgr√ºnde 3 Tage lang keine Baseballschl√§ger und Konserven."
            }
        ];

        let currentStoryIndex = 0;

        function nextStory() {
            currentStoryIndex = (currentStoryIndex + 1) % securityStories.length;
            updateStoryDisplay();
        }

        function previousStory() {
            currentStoryIndex = (currentStoryIndex - 1 + securityStories.length) % securityStories.length;
            updateStoryDisplay();
        }

        function updateStoryDisplay() {
            const story = securityStories[currentStoryIndex];
            document.getElementById('story-title').textContent = story.title;
            document.getElementById('story-content').textContent = story.content;
            document.getElementById('story-counter').textContent = `${currentStoryIndex + 1} / ${securityStories.length}`;
        }

        // Case Studies System
        const casesData = [
            {
                id: 'wannacry',
                title: 'WannaCry Krankenhaus-Angriff',
                icon: 'üè•',
                difficulty: 'easy',
                scenario: `
                    <h3>üö® NOTFALL: St. Mary's Hospital</h3>
                    <p><strong>Datum:</strong> 12. Mai 2017, 14:30 Uhr</p>
                    <p><strong>Situation:</strong> Alle Computer im Krankenhaus zeigen pl√∂tzlich eine rote Warnmeldung. 
                    Patientendaten sind nicht mehr zug√§nglich. OP-S√§le m√ºssen geschlossen werden.</p>
                    <p><strong>Erste Meldung:</strong> "Alle unsere Dateien sind verschl√ºsselt! Es wird $300 in Bitcoin gefordert!"</p>
                `,
                evidence: `
[14:28] SYSTEM: Ungew√∂hnliche Netzwerkaktivit√§t erkannt
[14:29] FIREWALL: Blockierter Zugriff auf Port 445 (SMB)
[14:30] USER_PC_001: Datei "WANNACRY_README.txt" erstellt
[14:30] USER_PC_002: Verschl√ºsselungsprozess gestartet
[14:31] SERVER_MAIN: Warnung: Massenhafte Dateiumbenennungen
[14:32] ADMIN: Notfall-Protokoll aktiviert
                `,
                steps: [
                    {
                        question: "Was ist Ihre erste Sofortma√ünahme?",
                        options: [
                            "Bitcoin zahlen, um schnell wieder arbeitsf√§hig zu sein",
                            "Alle Computer vom Netzwerk trennen",
                            "Neustart aller Server versuchen",
                            "Warten und hoffen, dass es sich selbst l√∂st"
                        ],
                        correct: 1,
                        explanation: "Sofortige Netzwerktrennung verhindert weitere Ausbreitung der Ransomware."
                    },
                    {
                        question: "Welche Schwachstelle nutzte WannaCry aus?",
                        options: [
                            "Ungepatchte Windows SMB-Schwachstelle (EternalBlue)",
                            "Schwache Passw√∂rter",
                            "USB-Stick-Infektion",
                            "E-Mail-Anh√§nge"
                        ],
                        correct: 0,
                        explanation: "WannaCry nutzte die EternalBlue-Schwachstelle in Windows SMB-Diensten."
                    },
                    {
                        question: "Beste langfristige Pr√§ventionsma√ünahme?",
                        options: [
                            "Alle Computer durch neue ersetzen",
                            "Regelm√§√üige Backups + Patch-Management",
                            "Antivirus-Software installieren",
                            "Internet komplett abschalten"
                        ],
                        correct: 1,
                        explanation: "Regelm√§√üige Backups und zeitnahe Sicherheitsupdates sind essentiell."
                    }
                ]
            },
            {
                id: 'target',
                title: 'Target Datenleck 2013',
                icon: 'üè¢',
                difficulty: 'medium',
                scenario: `
                    <h3>üõí Target Corporation Cyberangriff</h3>
                    <p><strong>Datum:</strong> 27. November 2013</p>
                    <p><strong>Situation:</strong> Kreditkartenunternehmen melden verd√§chtige Aktivit√§ten. 
                    40 Millionen Kreditkarten-Daten wurden gestohlen, 70 Millionen Kundendaten kompromittiert.</p>
                    <p><strong>Schaden:</strong> $162 Millionen Kosten, Vertrauensverlust</p>
                `,
                evidence: `
[Nov 15] HVAC_VENDOR: Phishing-Mail empfangen
[Nov 19] HVAC_SYSTEM: Malware "Citadel" installiert
[Nov 21] NETWORK: Laterale Bewegung zu POS-Systemen
[Nov 27] POS_TERMINAL_001: RAM-Scraping aktiviert
[Nov 30] EXFILTRATION: Daten zu externen FTP-Server
[Dec 02] FIRE_EYE: Malware-Warnung (ignoriert)
[Dec 12] KREDIT_FIRMA: Verd√§chtige Transaktionen gemeldet
                `,
                steps: [
                    {
                        question: "Wo begann der Angriff urspr√ºnglich?",
                        options: [
                            "Direkt an den Kassensystemen",
                            "Bei einem Drittanbieter (HVAC-Wartung)",
                            "√úber das Kundenwifi",
                            "Physischer Einbruch"
                        ],
                        correct: 1,
                        explanation: "Der Angriff begann bei einem HVAC-Wartungsunternehmen mit Netzwerkzugang."
                    },
                    {
                        question: "Was h√§tte den Schaden begrenzt?",
                        options: [
                            "Bessere Passw√∂rter",
                            "Netzwerksegmentierung zwischen Systemen",
                            "Mehr √úberwachungskameras",
                            "Verschl√ºsselte E-Mails"
                        ],
                        correct: 1,
                        explanation: "Netzwerksegmentierung h√§tte verhindert, dass HVAC-Zugang zu POS-Systemen f√ºhrt."
                    },
                    {
                        question: "Welche Daten wurden prim√§r gestohlen?",
                        options: [
                            "E-Mail-Adressen",
                            "Kreditkarten-Magnetstreifendaten",
                            "Sozialversicherungsnummern",
                            "Produktinformationen"
                        ],
                        correct: 1,
                        explanation: "Magnetstreifendaten von 40 Millionen Kreditkarten wurden aus dem RAM der POS-Systeme extrahiert."
                    }
                ]
            },
            {
                id: 'ceo-fraud',
                title: 'CEO-Fraud mit Deepfake',
                icon: 'üìß',
                difficulty: 'medium',
                scenario: `
                    <h3>üìß Business Email Compromise (BEC)</h3>
                    <p><strong>Datum:</strong> 15. M√§rz 2024</p>
                    <p><strong>Situation:</strong> Der Finanzchef erh√§lt einen "dringenden" Anruf vom CEO, 
                    der eine sofortige √úberweisung von 5 Millionen Euro verlangt. Die Stimme klingt 100% authentisch.</p>
                    <p><strong>Problem:</strong> Der echte CEO ist im Urlaub und hat nie angerufen.</p>
                `,
                evidence: `
[14:15] PHONE_SYSTEM: Eingehender Anruf +49-XXX-XXXXXX
[14:16] CFO_EMAIL: "Best√§tigung: 5M EUR √úberweisung initiiert"
[14:45] CEO_REAL: "Ich bin im Urlaub, habe nie angerufen!"
[15:00] VOICE_ANALYSIS: 99.8% √Ñhnlichkeit mit CEO-Stimme
[15:30] IP_TRACE: Anruf kam aus Rum√§nien via VoIP
[16:00] BANK: √úberweisung kann nicht mehr gestoppt werden
                `,
                steps: [
                    {
                        question: "Was macht diesen Angriff besonders gef√§hrlich?",
                        options: [
                            "Er nutzt KI-generierte Stimmen (Deepfake Audio)",
                            "Er erfolgt per E-Mail",
                            "Er fordert viel Geld",
                            "Er nutzt Malware"
                        ],
                        correct: 0,
                        explanation: "KI-Deepfake-Audio kann Stimmen t√§uschend echt nachahmen, was diese Angriffe extrem √ºberzeugend macht."
                    },
                    {
                        question: "Beste Pr√§ventionsma√ünahme gegen CEO-Fraud?",
                        options: [
                            "Bessere Telefonsysteme",
                            "Dual-Control-Prinzip bei hohen √úberweisungen",
                            "St√§rkere Passw√∂rter",
                            "Mehr √úberwachungskameras"
                        ],
                        correct: 1,
                        explanation: "Dual-Control erfordert zwei Personen f√ºr Freigaben und verhindert spontane Einzelentscheidungen."
                    },
                    {
                        question: "Wie h√§tte der CFO reagieren sollen?",
                        options: [
                            "Sofort √ºberweisen, um den CEO nicht zu ver√§rgern",
                            "Den CEO √ºber bekannte Kontaktdaten zur√ºckrufen",
                            "Die √úberweisung per E-Mail best√§tigen lassen",
                            "Warten bis zum n√§chsten Tag"
                        ],
                        correct: 1,
                        explanation: "Immer √ºber bekannte, unabh√§ngige Kan√§le r√ºckversichern bei unerwarteten Anfragen."
                    }
                ]
            },
            {
                id: 'stuxnet',
                title: 'Stuxnet Cyberwaffe',
                icon: 'üí£',
                difficulty: 'hard',
                scenario: `
                    <h3>üí£ Operation Olympic Games</h3>
                    <p><strong>Datum:</strong> Juni 2010</p>
                    <p><strong>Ziel:</strong> Iranische Nuklearanlage Natanz</p>
                    <p><strong>Mission:</strong> Zentrifugen zur Urananreicherung sabotieren, ohne entdeckt zu werden.</p>
                    <p><strong>Besonderheit:</strong> Erste bekannte Cyberwaffe gegen physische Infrastruktur.</p>
                `,
                evidence: `
[2009-01] USB_INFILTRATION: Malware via USB in isoliertes Netzwerk
[2009-06] SIEMENS_PLC: Stuxnet infiziert Steuerungssysteme
[2010-03] CENTRIFUGE_001: Ungew√∂hnliche Vibrationsmuster
[2010-05] OPERATOR: "Zentrifugen laufen instabil"
[2010-06] DISCOVERY: Stuxnet-Code auf externem System gefunden
[2010-07] ANALYSIS: Wurm nutzt 4 Zero-Day-Exploits
[2010-08] SIEMENS: Notfall-Patch f√ºr alle Industrieanlagen
                `,
                steps: [
                    {
                        question: "Wie gelangte Stuxnet in das isolierte Netzwerk?",
                        options: [
                            "√úber das Internet",
                            "Via USB-Sticks (Air-Gap-√úberbr√ºckung)",
                            "Durch E-Mail-Anh√§nge",
                            "√úber WLAN-Verbindungen"
                        ],
                        correct: 1,
                        explanation: "Stuxnet √ºberbr√ºckte Air-Gaps durch infizierte USB-Sticks - eine revolution√§re Angriffsmethode."
                    },
                    {
                        question: "Was war Stuxnets prim√§res Ziel?",
                        options: [
                            "Daten stehlen",
                            "Computer zerst√∂ren",
                            "Physische Zentrifugen sabotieren",
                            "Geld erpressen"
                        ],
                        correct: 2,
                        explanation: "Stuxnet war darauf programmiert, iranische Urananreicherungs-Zentrifugen physisch zu zerst√∂ren."
                    },
                    {
                        question: "Was macht Stuxnet historisch bedeutsam?",
                        options: [
                            "Erster Computer-Virus √ºberhaupt",
                            "Erste Cyberwaffe gegen kritische Infrastruktur",
                            "Gr√∂√üter Datendiebstahl der Geschichte",
                            "Erste Ransomware-Attacke"
                        ],
                        correct: 1,
                        explanation: "Stuxnet war die erste Cyberwaffe, die speziell f√ºr die Sabotage physischer Infrastruktur entwickelt wurde."
                    }
                ]
            },
            {
                id: 'solarwinds',
                title: 'SolarWinds Supply Chain Hack',
                icon: 'üåê',
                difficulty: 'hard',
                scenario: `
                    <h3>üåê Der gr√∂√üte Supply Chain Angriff der Geschichte</h3>
                    <p><strong>Datum:</strong> M√§rz 2020 - Dezember 2020</p>
                    <p><strong>Umfang:</strong> 18.000+ Organisationen betroffen, darunter US-Regierung, Microsoft, Cisco</p>
                    <p><strong>Methode:</strong> Trojanisierte Software-Updates von SolarWinds Orion</p>
                    <p><strong>Entdeckung:</strong> 9 Monate nach Beginn durch FireEye-Hack</p>
                `,
                evidence: `
[2020-03] SOLARWINDS: Build-System kompromittiert
[2020-05] ORION_UPDATE: Malware "SUNBURST" in Update 2019.4
[2020-06] MICROSOFT: Verd√§chtige Netzwerkaktivit√§t
[2020-09] TREASURY_DEPT: Ungew√∂hnliche Azure-Logins
[2020-12] FIREEYE: "Wir wurden gehackt" - Entdeckung
[2020-12] MICROSOFT: 40+ Kunden betroffen
[2021-01] CONGRESS: Notfall-Anh√∂rungen beginnen
                `,
                steps: [
                    {
                        question: "Was machte diesen Angriff so verheerend?",
                        options: [
                            "Sehr viel Geld wurde gestohlen",
                            "Vertrauensw√ºrdige Software wurde trojanisiert",
                            "Viele Computer wurden zerst√∂rt",
                            "Social Media wurde gehackt"
                        ],
                        correct: 1,
                        explanation: "Supply Chain Angriffe sind besonders gef√§hrlich, weil sie vertrauensw√ºrdige Software kompromittieren."
                    },
                    {
                        question: "Wie lange blieb der Angriff unentdeckt?",
                        options: [
                            "2 Wochen",
                            "3 Monate",
                            "9 Monate",
                            "2 Jahre"
                        ],
                        correct: 2,
                        explanation: "Der Angriff lief 9 Monate unentdeckt - ein Zeichen f√ºr die Raffinesse der Angreifer."
                    },
                    {
                        question: "Hauptlehre f√ºr Unternehmen?",
                        options: [
                            "Nie wieder Software-Updates installieren",
                            "Supply Chain Security und Vendor Risk Management",
                            "Alle Drittanbieter-Software verbieten",
                            "Nur Open-Source-Software verwenden"
                        ],
                        correct: 1,
                        explanation: "Unternehmen m√ºssen die Sicherheit ihrer gesamten Lieferkette √ºberwachen und bewerten."
                    }
                ]
            },
            {
                id: 'equifax',
                title: 'Equifax Datenleck 2017',
                icon: 'üèõÔ∏è',
                difficulty: 'medium',
                scenario: `
                    <h3>üèõÔ∏è Das Equifax Desaster</h3>
                    <p><strong>Datum:</strong> Mai - Juli 2017</p>
                    <p><strong>Schaden:</strong> 147 Millionen Amerikaner betroffen (fast die H√§lfte der Bev√∂lkerung)</p>
                    <p><strong>Daten:</strong> Namen, Sozialversicherungsnummern, Geburtsdaten, Adressen, F√ºhrerscheinnummern</p>
                    <p><strong>Ursache:</strong> Ungepatchte Apache Struts Schwachstelle</p>
                `,
                evidence: `
[2017-03-07] APACHE: Struts Sicherheitsupdate CVE-2017-5638 ver√∂ffentlicht
[2017-03-10] EQUIFAX: Patch-Benachrichtigung erhalten (NICHT installiert)
[2017-05-13] INTRUSION: Erste Kompromittierung durch Struts-Exploit
[2017-05-14] DATA_THEFT: Massive Datenextraktion beginnt
[2017-07-29] DISCOVERY: IT-Team entdeckt verd√§chtige Aktivit√§t
[2017-07-30] CONTAINMENT: Betroffene Server offline genommen
[2017-09-07] PUBLIC: Datenleck √∂ffentlich bekannt gegeben
                `,
                steps: [
                    {
                        question: "Was war die Hauptursache des Equifax-Hacks?",
                        options: [
                            "Schwache Passw√∂rter",
                            "Ungepatchte Apache Struts Schwachstelle",
                            "Phishing-E-Mails",
                            "Insider-Bedrohung"
                        ],
                        correct: 1,
                        explanation: "Equifax vers√§umte es, eine bekannte Apache Struts Schwachstelle zu patchen, obwohl der Patch verf√ºgbar war."
                    },
                    {
                        question: "Wie lange hatten die Angreifer Zugang?",
                        options: [
                            "2 Tage",
                            "2 Wochen", 
                            "2,5 Monate",
                            "1 Jahr"
                        ],
                        correct: 2,
                        explanation: "Die Angreifer hatten 2,5 Monate ungehinderten Zugang zu Equifax-Systemen."
                    },
                    {
                        question: "Wichtigste Lehre f√ºr Patch-Management?",
                        options: [
                            "Patches sind optional",
                            "Kritische Patches m√ºssen sofort eingespielt werden",
                            "Patches k√∂nnen warten bis zum n√§chsten Wartungsfenster",
                            "Nur monatliche Patch-Zyklen sind sicher"
                        ],
                        correct: 1,
                        explanation: "Kritische Sicherheitspatches m√ºssen unverz√ºglich installiert werden - Verz√∂gerungen k√∂nnen katastrophal sein."
                    }
                ]
            },
            {
                id: 'sony-psn',
                title: 'Sony PlayStation Network Hack',
                icon: 'üéÆ',
                difficulty: 'medium',
                scenario: `
                    <h3>üéÆ PlayStation Network Down</h3>
                    <p><strong>Datum:</strong> 17. April 2011</p>
                    <p><strong>Ausfallzeit:</strong> 23 Tage offline</p>
                    <p><strong>Betroffene:</strong> 77 Millionen PSN-Accounts + 24 Millionen Sony Online Entertainment</p>
                    <p><strong>Schaden:</strong> 171 Millionen Dollar + Reputationsverlust</p>
                `,
                evidence: `
[2011-04-17] PSN: Netzwerk aufgrund "externer Einwirkung" offline
[2011-04-20] SONY: "Unerlaubter Zugriff auf pers√∂nliche Daten m√∂glich"
[2011-04-26] CONFIRMATION: Kreditkartendaten m√∂glicherweise gestohlen
[2011-04-27] FBI: Ermittlungen wegen Identit√§tsdiebstahl
[2011-05-02] CONGRESS: Sony CEO vor Kongress geladen
[2011-05-15] PSN: Teilweise Wiederherstellung nach 23 Tagen
[2011-05-31] FULL_RESTORE: Volle Funktionalit√§t wiederhergestellt
                `,
                steps: [
                    {
                        question: "Was war besonders problematisch an Sonys Reaktion?",
                        options: [
                            "Sie haben zu schnell reagiert",
                            "Verz√∂gerte und unklare Kommunikation",
                            "Sie haben die Polizei nicht informiert",
                            "Das Netzwerk war zu schnell wieder online"
                        ],
                        correct: 1,
                        explanation: "Sony wartete 6 Tage bevor sie Nutzer √ºber das Datenleck informierten - ein schwerer Kommunikationsfehler."
                    },
                    {
                        question: "Welche Daten waren betroffen?",
                        options: [
                            "Nur E-Mail-Adressen",
                            "Namen, E-Mails, Passw√∂rter, m√∂glicherweise Kreditkartendaten",
                            "Nur Spielst√§nde",
                            "Ausschlie√ülich Kreditkartennummern"
                        ],
                        correct: 1,
                        explanation: "Umfassende pers√∂nliche Daten inklusive verschl√ºsselter Passw√∂rter und m√∂glicherweise Kreditkarteninformationen."
                    },
                    {
                        question: "Beste Incident Response Ma√ünahme?",
                        options: [
                            "Das Problem geheim halten",
                            "Sofortige, transparente Kommunikation",
                            "Erst nach vollst√§ndiger Untersuchung informieren",
                            "Nur betroffene Premiumkunden informieren"
                        ],
                        correct: 1,
                        explanation: "Transparente und zeitnahe Kommunikation ist entscheidend f√ºr das Vertrauen der Nutzer."
                    }
                ]
            },
            {
                id: 'icloud-celebrity',
                title: 'iCloud Celebrity Photo Hack',
                icon: 'üçé',
                difficulty: 'easy',
                scenario: `
                    <h3>üçé "The Fappening" - Celebrity iCloud Hack</h3>
                    <p><strong>Datum:</strong> August - September 2014</p>
                    <p><strong>Methode:</strong> Brute-Force-Angriffe auf iCloud-Accounts + Phishing</p>
                    <p><strong>Opfer:</strong> 100+ Prominente, darunter Jennifer Lawrence, Kate Upton</p>
                    <p><strong>Auswirkung:</strong> Private Fotos √∂ffentlich geleakt</p>
                `,
                evidence: `
[2014-08-28] ICLOUD: Brute-Force-Angriffe auf Celebrity-Accounts
[2014-08-31] 4CHAN: Erste private Fotos geleakt
[2014-09-01] APPLE: "Targeted attack auf Usernames/Passwords"
[2014-09-02] FBI: Ermittlungen wegen Computer-Hacking eingeleitet
[2014-09-02] APPLE: Rate-Limiting f√ºr iCloud-Login implementiert
[2014-10-01] ARRESTS: Erste Verhaftungen
[2015-03-15] CONVICTION: Hauptt√§ter zu 18 Monaten Gef√§ngnis verurteilt
                `,
                steps: [
                    {
                        question: "Wie gelangten die Hacker an die Passw√∂rter?",
                        options: [
                            "SQL-Injection in iCloud",
                            "Brute-Force + Phishing (schwache Passw√∂rter/Sicherheitsfragen)",
                            "Malware auf Apple-Servern",
                            "Insider bei Apple"
                        ],
                        correct: 1,
                        explanation: "Kombination aus Brute-Force-Angriffen und Phishing, verst√§rkt durch schwache Passw√∂rter und Sicherheitsfragen."
                    },
                    {
                        question: "Was h√§tte die Angriffe verhindert?",
                        options: [
                            "St√§rkere Server",
                            "Zwei-Faktor-Authentifizierung (2FA)",
                            "Bessere Verschl√ºsselung",
                            "Mehr Speicherplatz"
                        ],
                        correct: 1,
                        explanation: "2FA h√§tte die Angriffe gestoppt, selbst bei kompromittierten Passw√∂rtern."
                    },
                    {
                        question: "Hauptlehre f√ºr normale Nutzer?",
                        options: [
                            "Cloud-Dienste nie nutzen",
                            "Starke, einzigartige Passw√∂rter + 2FA aktivieren",
                            "Keine Fotos in der Cloud speichern",
                            "Nur Apple-Ger√§te verwenden"
                        ],
                        correct: 1,
                        explanation: "Starke, einzigartige Passw√∂rter und 2FA sind die wichtigsten Schutzma√ünahmen f√ºr jeden Nutzer."
                    }
                ]
            },
            {
                id: 'maersk-notpetya',
                title: 'Maersk NotPetya Cyberangriff',
                icon: 'üö¢',
                difficulty: 'hard',
                scenario: `
                    <h3>üö¢ Maersk: Von der Ukraine in die ganze Welt</h3>
                    <p><strong>Datum:</strong> 27. Juni 2017</p>
                    <p><strong>Ausl√∂ser:</strong> NotPetya-Malware via ukrainische Steuersoftware M.E.Doc</p>
                    <p><strong>Schaden:</strong> 4.000 Server, 45.000 PCs zerst√∂rt, 300 Millionen Dollar Verlust</p>
                    <p><strong>Ausfallzeit:</strong> 10 Tage kompletter Stillstand der weltgr√∂√üten Reederei</p>
                `,
                evidence: `
[2017-06-27 14:30] UKRAINE: M.E.Doc Software-Update mit NotPetya infiziert
[2017-06-27 15:00] MAERSK_ODESSA: Erste Infektion √ºber ukrainische Tochter
[2017-06-27 15:15] GLOBAL_SPREAD: Ausbreitung √ºber Netzwerk-Shares (EternalBlue)
[2017-06-27 16:00] TERMINALS: Alle Hafenterminals weltweit offline
[2017-06-27 18:00] SHIPS: 600+ Containerschiffe k√∂nnen nicht entladen werden
[2017-06-28] MANUAL: R√ºckkehr zu Papier und Telefon
[2017-07-07] RECOVERY: Erste Systeme wieder online
                `,
                steps: [
                    {
                        question: "Wie begann der Maersk-Angriff?",
                        options: [
                            "Phishing-E-Mail an Maersk-Mitarbeiter",
                            "√úber infizierte ukrainische Steuersoftware",
                            "USB-Stick im Hauptquartier",
                            "Hack der Maersk-Website"
                        ],
                        correct: 1,
                        explanation: "NotPetya verbreitete sich √ºber die kompromittierte ukrainische Steuersoftware M.E.Doc und sprang von dort auf globale Netzwerke √ºber."
                    },
                    {
                        question: "Was machte den Schaden so verheerend?",
                        options: [
                            "NotPetya war darauf ausgelegt zu zerst√∂ren, nicht zu erpressen",
                            "Maersk hatte keine Backups",
                            "Die Malware war zu schnell",
                            "Alle Mitarbeiter waren im Urlaub"
                        ],
                        correct: 0,
                        explanation: "NotPetya war eine Cyber-Waffe, keine echte Ransomware - sie zerst√∂rte Daten unwiderruflich, selbst bei Zahlung."
                    },
                    {
                        question: "Wie rettete Maersk ihre globalen Operationen?",
                        options: [
                            "Sie zahlten das L√∂segeld",
                            "Ein einziger Server in Ghana war offline und hatte ein sauberes Backup",
                            "Sie kauften neue Computer",
                            "Sie stellten neue Mitarbeiter ein"
                        ],
                        correct: 1,
                        explanation: "Ein Gl√ºcksfall: Ein Server in Ghana war w√§hrend eines Stromausfalls offline und blieb uninfiziert - er wurde zur Basis der Wiederherstellung."
                    }
                ]
            },
            {
                id: 'pharma-ransomware',
                title: 'Pharma COVID-Forschung Ransomware',
                icon: 'üíä',
                difficulty: 'medium',
                scenario: `
                    <h3>üíä Angriff auf COVID-Impfstoff-Forschung</h3>
                    <p><strong>Datum:</strong> M√§rz 2020 - fortlaufend</p>
                    <p><strong>Ziele:</strong> Pfizer, Moderna, AstraZeneca, Universit√§ten</p>
                    <p><strong>Timing:</strong> Mitten in der globalen Pandemie</p>
                    <p><strong>Moral:</strong> Ransomware-Gruppen vs. lebensrettende Forschung</p>
                `,
                evidence: `
[2020-03-15] MAZE_GROUP: "Wir greifen keine Krankenh√§user an"
[2020-05-20] NETWALKER: Angriff auf University of California SF
[2020-06-11] UCSF: $3M L√∂segeld f√ºr COVID-Forschungsdaten
[2020-09-02] PFIZER: Spear-Phishing auf Vaccine-Forschungsteam
[2020-11-12] EGREGOR: Angriff auf Konica Minolta (Pharma-Supplier)
[2021-02-18] DARKSIDE: "Wir haben Ethik-Kodex" - trotzdem Krankenhaus-Angriffe
[2021-05-14] COLONIAL: Pipeline-Hack zeigt Heuchelei
                `,
                steps: [
                    {
                        question: "Was war besonders zynisch an diesen Angriffen?",
                        options: [
                            "Sie passierten nur nachts",
                            "Angriffe auf lebensrettende COVID-Forschung w√§hrend Pandemie",
                            "Sie verwendeten neue Malware",
                            "Die L√∂segelder waren sehr hoch"
                        ],
                        correct: 1,
                        explanation: "Die Angriffe behinderten kritische COVID-19-Forschung zu einer Zeit, als Millionen von Leben auf dem Spiel standen."
                    },
                    {
                        question: "Wie rechtfertigten Ransomware-Gruppen ihre Angriffe?",
                        options: [
                            "Sie sagten, sie seien Whistleblower",
                            "Behaupteten 'Ethik-Kodex' - griffen aber trotzdem an",
                            "Sie wollten Impfstoffe kostenlos machen",
                            "Sie leugneten jede Beteiligung"
                        ],
                        correct: 1,
                        explanation: "Viele Ransomware-Gruppen behaupteten √∂ffentlich, keine Krankenh√§user anzugreifen, taten es aber trotzdem."
                    },
                    {
                        question: "Hauptproblem f√ºr Pharmaunternehmen?",
                        options: [
                            "Zu wenig Geld f√ºr IT-Sicherheit",
                            "Forschungsdaten sind besonders wertvoll f√ºr Angreifer",
                            "Alle Mitarbeiter arbeiten von zu Hause",
                            "Zu viele verschiedene Computer"
                        ],
                        correct: 1,
                        explanation: "Forschungsdaten sind extrem wertvoll - sowohl f√ºr Konkurrenten als auch f√ºr Erpresser."
                    }
                ]
            },
            {
                id: 'opm-hack',
                title: 'Office of Personnel Management Hack',
                icon: 'üèõÔ∏è',
                difficulty: 'hard',
                scenario: `
                    <h3>üèõÔ∏è Der gr√∂√üte Regierungs-Hack der USA</h3>
                    <p><strong>Datum:</strong> 2014-2015 (entdeckt Juni 2015)</p>
                    <p><strong>Betroffene:</strong> 21,5 Millionen US-Regierungsangestellte</p>
                    <p><strong>Daten:</strong> Sicherheits√ºberpr√ºfungen, Fingerabdr√ºcke, Familieninformationen</p>
                    <p><strong>Attribution:</strong> Chinesische staatliche Hacker (APT1)</p>
                `,
                evidence: `
[2014-05] INITIAL_BREACH: Spear-Phishing auf OPM-Mitarbeiter
[2014-07] KEYPOINT: Contractor-Netzwerk kompromittiert
[2015-03] ESCALATION: Admin-Credentials gestohlen
[2015-04] DATA_THEFT: SF-86 Formulare (Background Checks) extrahiert
[2015-06-04] DISCOVERY: US-CERT entdeckt ungew√∂hnlichen Traffic
[2015-06-08] SHUTDOWN: Betroffene Systeme offline genommen
[2015-07-09] CONGRESS: OPM Director tritt zur√ºck
[2015-09-23] ATTRIBUTION: China als Urheber identifiziert
                `,
                steps: [
                    {
                        question: "Was machte den OPM-Hack strategisch wertvoll?",
                        options: [
                            "Viel Geld wurde gestohlen",
                            "Sicherheits√ºberpr√ºfungen erm√∂glichen Erpressung von Agenten",
                            "Computer wurden zerst√∂rt",
                            "Website wurde defaced"
                        ],
                        correct: 1,
                        explanation: "SF-86-Formulare enthalten intime Details √ºber Regierungsangestellte - perfekt f√ºr Spionage und Erpressung."
                    },
                    {
                        question: "Wie lange blieben die Angreifer unentdeckt?",
                        options: [
                            "2 Wochen",
                            "3 Monate",
                            "√úber 1 Jahr",
                            "5 Jahre"
                        ],
                        correct: 2,
                        explanation: "Die Angreifer hatten √ºber ein Jahr lang Zugang zu den sensitivsten Regierungsdaten."
                    },
                    {
                        question: "Hauptproblem der OPM-Sicherheit?",
                        options: [
                            "Veraltete Systeme ohne grundlegende Sicherheitsma√ünahmen",
                            "Zu wenige Mitarbeiter",
                            "Schlechte Internet-Verbindung",
                            "Zu viele Besucher"
                        ],
                        correct: 0,
                        explanation: "OPM hatte fundamentale Sicherheitsm√§ngel: keine Verschl√ºsselung, veraltete Systeme, schwache Authentifizierung."
                    }
                ]
            },
            {
                id: 'mcdonalds-app',
                title: 'McDonald\'s App Datenleck Indien',
                icon: 'üçî',
                difficulty: 'easy',
                scenario: `
                    <h3>üçî McDonald's App Datenleck in Indien</h3>
                    <p><strong>Datum:</strong> April 2021</p>
                    <p><strong>Betroffene:</strong> 2,2 Millionen Nutzer der McDonald's App</p>
                    <p><strong>Daten:</strong> Namen, E-Mails, Telefonnummern, Adressen, Bestellhistorie</p>
                    <p><strong>Ursache:</strong> Unsichere API-Konfiguration</p>
                `,
                evidence: `
[2021-04-20] SECURITY_RESEARCHER: Ungesch√ºtzte API entdeckt
[2021-04-21] ENUMERATION: 2,2M Nutzerprofile √ºber API abrufbar
[2021-04-22] DISCLOSURE: Responsible Disclosure an McDonald's
[2021-04-25] MCDONALD'S: "Wir pr√ºfen den Bericht"
[2021-04-30] PATCH: API-Zugriff eingeschr√§nkt
[2021-05-05] CONFIRMATION: Datenleck best√§tigt und behoben
[2021-05-10] NOTIFICATION: Nutzer √ºber E-Mail informiert
                `,
                steps: [
                    {
                        question: "Was war die Hauptursache des McDonald's Datenlecks?",
                        options: [
                            "Hacker brachen in Server ein",
                            "Ungesch√ºtzte API ohne Authentifizierung",
                            "Mitarbeiter verkauften Daten",
                            "Phishing-Angriff auf Nutzer"
                        ],
                        correct: 1,
                        explanation: "Eine falsch konfigurierte API erlaubte jedem, Nutzerdaten ohne Authentifizierung abzurufen."
                    },
                    {
                        question: "Wie wurde das Datenleck entdeckt?",
                        options: [
                            "McDonald's entdeckte es selbst",
                            "Ein Sicherheitsforscher meldete es",
                            "Nutzer beschwerten sich",
                            "Die Polizei informierte McDonald's"
                        ],
                        correct: 1,
                        explanation: "Ein ethischer Sicherheitsforscher entdeckte die unsichere API und meldete sie verantwortungsvoll."
                    },
                    {
                        question: "Beste Pr√§ventionsma√ünahme f√ºr solche API-Lecks?",
                        options: [
                            "Keine Apps mehr entwickeln",
                            "API Security Testing und Authentifizierung",
                            "Alle Daten l√∂schen",
                            "Nur interne APIs verwenden"
                        ],
                        correct: 1,
                        explanation: "Regelm√§√üige API-Sicherheitstests und ordnungsgem√§√üe Authentifizierung sind essentiell."
                    }
                ]
            },
            {
                id: 'university-ransomware',
                title: 'Universit√§ts-Ransomware Angriff',
                icon: 'üéì',
                difficulty: 'medium',
                scenario: `
                    <h3>üéì Universit√§t M√ºnchen: Semester in Gefahr</h3>
                    <p><strong>Datum:</strong> Juli 2023 (fiktives Beispiel basierend auf realen F√§llen)</p>
                    <p><strong>Timing:</strong> 2 Wochen vor Pr√ºfungsphase</p>
                    <p><strong>Betroffene Systeme:</strong> Studentenverwaltung, E-Learning, E-Mail, Bibliothek</p>
                    <p><strong>Forderung:</strong> 5 Millionen Euro oder Semester verf√§llt</p>
                `,
                evidence: `
[2023-07-15 02:30] PHISHING: E-Mail an Professor mit "Forschungsantrag.docx"
[2023-07-15 08:45] MACRO_EXEC: Word-Makro l√§dt Cobalt Strike Beacon
[2023-07-15 12:20] LATERAL: Bewegung ins Studentenverwaltungsnetz
[2023-07-16 01:15] CRYPTO_LOCKER: Verschl√ºsselung aller Studentendaten
[2023-07-16 06:00] RANSOM_NOTE: "Ihre Studenten k√∂nnen nicht graduieren"
[2023-07-16 09:00] PANIC: 50.000 Studenten k√∂nnen nicht auf Noten zugreifen
[2023-07-20] DECISION: Universit√§t zahlt nicht, baut alles neu auf
                `,
                steps: [
                    {
                        question: "Warum sind Universit√§ten attraktive Ziele?",
                        options: [
                            "Sie haben viel Geld",
                            "Kritische Timing + wertvolle Forschungsdaten + schwache IT",
                            "Viele Computer",
                            "Studenten sind leichtgl√§ubig"
                        ],
                        correct: 1,
                        explanation: "Universit√§ten haben kritische Deadlines (Pr√ºfungen), wertvolle Forschung und oft unterfinanzierte IT-Sicherheit."
                    },
                    {
                        question: "Was war der Druckpunkt bei diesem Angriff?",
                        options: [
                            "Weihnachtszeit",
                            "Pr√ºfungsphase - Studenten k√∂nnen nicht graduieren",
                            "Ferienzeit",
                            "Haushaltsverhandlungen"
                        ],
                        correct: 1,
                        explanation: "Angreifer w√§hlten bewusst die Pr√ºfungszeit - maximaler Druck durch bedrohte Abschl√ºsse von 50.000 Studenten."
                    },
                    {
                        question: "Beste Strategie f√ºr Universit√§ten?",
                        options: [
                            "Immer zahlen",
                            "Nie zahlen",
                            "Robuste Backups + Incident Response Plan",
                            "Internet abschalten"
                        ],
                        correct: 2,
                        explanation: "Regelm√§√üige, getestete Backups und ein Notfallplan sind die beste Verteidigung gegen Ransomware."
                    }
                ]
            },
            {
                id: 'capital-one',
                title: 'Capital One AWS Hack',
                icon: 'üí≥',
                difficulty: 'medium',
                scenario: `
                    <h3>üí≥ Capital One: 100 Millionen Kunden betroffen</h3>
                    <p><strong>Datum:</strong> M√§rz - Juli 2019</p>
                    <p><strong>Angreiferin:</strong> Paige Thompson, ehemalige AWS-Mitarbeiterin</p>
                    <p><strong>Methode:</strong> Server-Side Request Forgery (SSRF) gegen AWS-Metadaten</p>
                    <p><strong>Schaden:</strong> Kreditkartenantr√§ge von 100M+ Kunden</p>
                `,
                evidence: `
[2019-03-22] RECON: Thompson scannt Capital One Web-Apps
[2019-03-23] SSRF: Exploit gegen WAF-Konfiguration
[2019-03-23] AWS_CREDS: IAM-Credentials aus EC2-Metadaten gestohlen
[2019-04-21] S3_ACCESS: Zugriff auf 700+ S3-Buckets
[2019-05-09] DATA_THEFT: Download von 30GB Kundendaten
[2019-07-17] GITHUB: Thompson postet Exploit-Code auf GitHub
[2019-07-19] TIP: Anonymer Tipp an Capital One
[2019-07-29] ARREST: FBI verhaftet Thompson
                `,
                steps: [
                    {
                        question: "Welche Schwachstelle nutzte der Capital One Hack?",
                        options: [
                            "SQL-Injection",
                            "Server-Side Request Forgery (SSRF)",
                            "Brute-Force-Angriff",
                            "Phishing"
                        ],
                        correct: 1,
                        explanation: "SSRF-Angriff gegen die WAF erm√∂glichte Zugriff auf AWS EC2-Metadaten und damit auf IAM-Credentials."
                    },
                    {
                        question: "Was war der gr√∂√üte Konfigurationsfehler?",
                        options: [
                            "Keine Verschl√ºsselung",
                            "Zu weitreichende IAM-Berechtigungen",
                            "Schwache Passw√∂rter",
                            "Keine Firewalls"
                        ],
                        correct: 1,
                        explanation: "Die kompromittierten IAM-Credentials hatten Zugriff auf hunderte S3-Buckets - viel zu weitreichende Berechtigungen."
                    },
                    {
                        question: "Wie wurde die Angreiferin gefasst?",
                        options: [
                            "Durch √úberwachungskameras",
                            "Sie postete Exploit-Details auf GitHub",
                            "Durch IP-Adress-Verfolgung",
                            "Ein Insider meldete sie"
                        ],
                        correct: 1,
                        explanation: "Thompson machte den fatalen Fehler, ihre Exploit-Methoden √∂ffentlich auf GitHub zu posten."
                    }
                ]
            },
            {
                id: 'dusseldorf-hospital',
                title: 'D√ºsseldorf Klinik Ransomware',
                icon: 'üè•',
                difficulty: 'hard',
                scenario: `
                    <h3>üè• Universit√§tsklinikum D√ºsseldorf: Leben in Gefahr</h3>
                    <p><strong>Datum:</strong> 10. September 2020</p>
                    <p><strong>Trag√∂die:</strong> Erste dokumentierte Ransomware-Todesfall?</p>
                    <p><strong>Situation:</strong> Patientin muss 32km weiter transportiert werden</p>
                    <p><strong>Konsequenz:</strong> Versp√§tete Behandlung, Patient verstirbt</p>
                `,
                evidence: `
[2020-09-10 18:45] SHITRIX: Ransomware verschl√ºsselt Klinik-Server
[2020-09-10 19:30] EMERGENCY: IT-Systeme fallen aus, Notfallmodus
[2020-09-10 20:15] AMBULANCE: Krankenwagen mit Notfall-Patientin
[2020-09-10 20:30] REDIRECT: Transport nach Wuppertal (32km weiter)
[2020-09-10 21:45] ARRIVAL: Versp√§tete Ankunft in Wuppertal
[2020-09-11 03:20] DEATH: Patientin verstirbt - Ransomware-Todesfall?
[2020-09-12] POLICE: Ermittlungen wegen fahrl√§ssiger T√∂tung
[2020-09-14] DECRYPTION: Hacker geben kostenlos Schl√ºssel heraus
                `,
                steps: [
                    {
                        question: "Was macht diesen Fall historisch bedeutsam?",
                        options: [
                            "Erstes Krankenhaus gehackt",
                            "M√∂glicherweise erster dokumentierter Ransomware-Todesfall",
                            "H√∂chstes L√∂segeld aller Zeiten",
                            "Erste internationale Ermittlung"
                        ],
                        correct: 1,
                        explanation: "Dies k√∂nnte der erste dokumentierte Fall sein, in dem Ransomware direkt zu einem Todesfall beigetragen hat."
                    },
                    {
                        question: "Wie reagierten die Angreifer auf den Todesfall?",
                        options: [
                            "Sie forderten mehr Geld",
                            "Sie gaben kostenlos den Entschl√ºsselungskey heraus",
                            "Sie griffen weitere Krankenh√§user an",
                            "Sie leugneten jede Verantwortung"
                        ],
                        correct: 1,
                        explanation: "Die Hacker gaben freiwillig den Entschl√ºsselungskey heraus, als sie von dem Todesfall erfuhren."
                    },
                    {
                        question: "Welche juristische Frage wirft dieser Fall auf?",
                        options: [
                            "Sind Ransomware-Angriffe legal?",
                            "K√∂nnen Hacker f√ºr Todesf√§lle zur Verantwortung gezogen werden?",
                            "M√ºssen Krankenh√§user L√∂segeld zahlen?",
                            "Ist Backup-Pflicht f√ºr Krankenh√§user?"
                        ],
                        correct: 1,
                        explanation: "Der Fall stellt die Frage, ob Cyberkriminelle f√ºr indirekte Todesf√§lle durch ihre Angriffe strafrechtlich haftbar sind."
                    }
                ]
            }
        ];

        let currentCase = null;
        let currentStep = 0;

        function showCaseStudies() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('case-studies-screen').style.display = 'block';
        }

        function startCase(caseIndex) {
            currentCase = casesData[caseIndex];
            currentStep = 0;
            
            document.getElementById('case-selection').style.display = 'none';
            document.getElementById('case-interface').style.display = 'block';
            
            loadCaseStep();
        }

        function loadCaseStep() {
            // Update progress steps
            for (let i = 1; i <= 3; i++) {
                const step = document.getElementById(`step-${i}`);
                if (i <= currentStep + 1) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
                if (i < currentStep + 1) {
                    step.classList.add('completed');
                }
            }

            // Load scenario
            document.getElementById('case-scenario').innerHTML = currentCase.scenario;
            
            // Load evidence
            document.getElementById('case-evidence').innerHTML = `<pre>${currentCase.evidence}</pre>`;
            
            // Load current question
            if (currentStep < currentCase.steps.length) {
                const step = currentCase.steps[currentStep];
                document.getElementById('case-questions').innerHTML = `
                    <h3>Schritt ${currentStep + 1}: ${step.question}</h3>
                    ${step.options.map((option, index) => `
                        <div class="answer-option" style="margin: 10px 0;">
                            <input type="radio" name="case-answer" value="${index}" id="case-answer-${index}">
                            <label for="case-answer-${index}" style="cursor: pointer; padding: 10px; display: block;">${option}</label>
                        </div>
                    `).join('')}
                    <div id="case-feedback" style="margin-top: 15px; display: none;"></div>
                `;
            }
        }

        function nextStep() {
            const selectedAnswer = document.querySelector('input[name="case-answer"]:checked');
            if (!selectedAnswer) {
                alert('Bitte w√§hlen Sie eine Antwort aus.');
                return;
            }

            const step = currentCase.steps[currentStep];
            const isCorrect = parseInt(selectedAnswer.value) === step.correct;
            
            const feedback = document.getElementById('case-feedback');
            feedback.style.display = 'block';
            feedback.innerHTML = `
                <div style="padding: 15px; border-radius: 8px; background: ${isCorrect ? '#d4edda' : '#f8d7da'}; color: ${isCorrect ? '#155724' : '#721c24'};">
                    <strong>${isCorrect ? '‚úÖ Richtig!' : '‚ùå Falsch!'}</strong><br>
                    ${step.explanation}
                </div>
            `;

            document.getElementById('next-step-btn').textContent = currentStep < currentCase.steps.length - 1 ? 'N√§chster Schritt' : 'Fall abschlie√üen';
            
            setTimeout(() => {
                if (currentStep < currentCase.steps.length - 1) {
                    currentStep++;
                    loadCaseStep();
                } else {
                    completeCaseStudy();
                }
            }, 3000);
        }

        function completeCaseStudy() {
            document.getElementById('case-questions').innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <h2>üéâ Fall erfolgreich bearbeitet!</h2>
                    <p>Sie haben alle Schritte der Incident Response durchlaufen:</p>
                    <ul style="text-align: left; max-width: 400px; margin: 20px auto;">
                        <li>‚úÖ Sofortma√ünahmen eingeleitet</li>
                        <li>‚úÖ Ursachen identifiziert</li>
                        <li>‚úÖ Pr√§ventionsma√ünahmen definiert</li>
                    </ul>
                </div>
            `;
            document.getElementById('next-step-btn').style.display = 'none';
        }

        function backToSelection() {
            document.getElementById('case-selection').style.display = 'block';
            document.getElementById('case-interface').style.display = 'none';
        }

        function backToStart() {
            document.getElementById('case-studies-screen').style.display = 'none';
            document.getElementById('start-screen').style.display = 'block';
        }

        // Tool functions (can be expanded)
        function analyzeLog() {
            if (!currentCase) return;
            
            const responses = {
                'wannacry': 'üîç Log-Analyse: SMB-Verbindungen auf Port 445, Verschl√ºsselungsaktivit√§ten, WANNACRY_README.txt erstellt',
                'target': 'üîç Log-Analyse: HVAC-Vendor Zugriff, Citadel-Malware, POS-RAM-Scraping erkannt',
                'stuxnet': 'üîç Log-Analyse: USB-Autorun-Events, Siemens PLC-Anomalien, 4 Zero-Day-Exploits',
                'solarwinds': 'üîç Log-Analyse: Orion-Update 2019.4, SUNBURST-Backdoor, DNS-Tunneling aktiviert',
                'equifax': 'üîç Log-Analyse: Apache Struts CVE-2017-5638 Exploit, Datenbank-Queries, Exfiltration via HTTPS',
                'sony-psn': 'üîç Log-Analyse: Ungew√∂hnliche DB-Zugriffe, Account-Enumeration, Massenhafte Datenextraktion',
                'maersk-notpetya': 'üîç Log-Analyse: M.E.Doc Update-Prozess, EternalBlue lateral movement, Disk-Wiper aktiviert',
                'pharma-ransomware': 'üîç Log-Analyse: Spear-Phishing Links, Maze/NetWalker Signaturen, Research-Data targeting',
                'opm-hack': 'üîç Log-Analyse: Spear-Phishing Erfolg, Keypoint-Contractor Pivot, SF-86 Datenbank-Dumps',
                'mcdonalds-app': 'üîç Log-Analyse: API-Calls ohne Authentifizierung, Massenhafte Datenabfragen, Keine Rate-Limits',
                'university-ransomware': 'üîç Log-Analyse: Word-Makro Execution, Cobalt Strike Beacon, Student-DB Encryption',
                'capital-one': 'üîç Log-Analyse: SSRF-Requests gegen Metadaten-Service, S3-Bucket Enumeration, 30GB Downloads',
                'dusseldorf-hospital': 'üîç Log-Analyse: Shitrix Ransomware deployment, Medical-System lockouts, Emergency protocols'
            };
            
            alert(responses[currentCase.id] || 'üîç Log-Analyse: Verd√§chtige Aktivit√§ten erkannt!');
        }

        function checkNetwork() {
            if (!currentCase) return;
            
            const responses = {
                'wannacry': 'üåê Netzwerk-Scan: 342 infizierte Hosts, SMB-Wurm-Ausbreitung, Quarant√§ne empfohlen',
                'target': 'üåê Netzwerk-Scan: HVAC-Netzwerk zu POS-Systemen verbunden, Segmentierung fehlt',
                'stuxnet': 'üåê Netzwerk-Scan: Air-Gap-Netzwerk, Siemens SCADA-Systeme, USB-Bridge erkannt',
                'solarwinds': 'üåê Netzwerk-Scan: Orion-Server als Command&Control, 18.000+ Downstream-Verbindungen',
                'equifax': 'üåê Netzwerk-Scan: Web-Server kompromittiert, Datenbank-Server lateral erreicht',
                'sony-psn': 'üåê Netzwerk-Scan: DMZ-Breach, interne PSN-Server kompromittiert',
                'maersk-notpetya': 'üåê Netzwerk-Scan: Ukraine->Global spread, 4000 Server, 45000 PCs betroffen',
                'pharma-ransomware': 'üåê Netzwerk-Scan: Research-Networks isoliert, aber Backup-Verbindungen kompromittiert',
                'omp-hack': 'üåê Netzwerk-Scan: OPM-Contractor-Netzwerke, SF-86 Database-Cluster, 21M Records exposed',
                'mcdonalds-app': 'üåê Netzwerk-Scan: Ungesch√ºtzte API-Endpoints, 2.2M User-Records abrufbar',
                'university-ransomware': 'üåê Netzwerk-Scan: Campus-Netzwerk, Student-DB-Cluster, E-Learning-Systeme offline',
                'capital-one': 'üåê Netzwerk-Scan: AWS-Environment, 700+ S3-Buckets accessible, WAF misconfigured',
                'dusseldorf-hospital': 'üåê Netzwerk-Scan: Medical-Device-Network, Life-Support-Systems, Emergency-Protocols'
            };
            
            alert(responses[currentCase.id] || 'üåê Netzwerk-Scan: Mehrere kompromittierte Hosts gefunden.');
        }

        function forensics() {
            if (!currentCase) return;
            
            const responses = {
                'wannacry': 'üî¨ Forensik: WannaCry-Ransomware, NSA EternalBlue-Exploit, Kill-Switch-Domain erkannt',
                'target': 'üî¨ Forensik: Citadel-Banking-Trojaner, Point-of-Sale-Malware, Kreditkarten-Scraper',
                'stuxnet': 'üî¨ Forensik: Hochkomplexer Wurm, digitale Zertifikate gestohlen, PLC-Rootkit',
                'solarwinds': 'üî¨ Forensik: SUNBURST-Backdoor, Supply-Chain-Trojaner, APT29-Attribution',
                'equifax': 'üî¨ Forensik: Apache Struts RCE, Webshell-Upload, SQL-Injection-Spuren',
                'sony-psn': 'üî¨ Forensik: Custom-Malware, Datenbank-Dump-Tools, Credential-Harvesting',
                'maersk-notpetya': 'üî¨ Forensik: NotPetya Disk-Wiper, M.E.Doc Trojan, Russian APT28 Attribution',
                'pharma-ransomware': 'üî¨ Forensik: Maze/NetWalker/Egregor Families, COVID-Research targeting, Data-Auction',
                'opm-hack': 'üî¨ Forensik: APT1 (Comment Crew), Custom RATs, Long-term persistence, China Attribution',
                'mcdonalds-app': 'üî¨ Forensik: API Configuration Error, No Authentication Checks, OWASP API Top 10',
                'university-ransomware': 'üî¨ Forensik: Cobalt Strike Framework, Word Macro Dropper, Timing-based Attack',
                'capital-one': 'üî¨ Forensik: SSRF Exploitation, AWS IAM Abuse, Insider Knowledge, GitHub Evidence',
                'dusseldorf-hospital': 'üî¨ Forensik: Shitrix Ransomware Variant, Medical System Targeting, Ethical Disclosure'
            };
            
            alert(responses[currentCase.id] || 'üî¨ Forensik: Malware-Signaturen entsprechen bekannter Familie.');
        }

        function timeline() {
            if (!currentCase) return;
            
            const responses = {
                'wannacry': '‚è∞ Timeline: 3 Tage Ausbreitung, 300.000+ Computer in 150+ L√§ndern, Kill-Switch nach 4 Tagen',
                'target': '‚è∞ Timeline: 2 Wochen initial access, 3 Wochen laterale Bewegung, 6 Wochen unentdeckt',
                'stuxnet': '‚è∞ Timeline: 2009 erste Infektion, 2010 Entdeckung, 1000+ Zentrifugen zerst√∂rt',
                'solarwinds': '‚è∞ Timeline: M√§rz 2020 Beginn, 9 Monate unentdeckt, Dezember 2020 Aufdeckung',
                'equifax': '‚è∞ Timeline: M√§rz Patch verf√ºgbar, Mai Kompromittierung, Juli Entdeckung',
                'sony-psn': '‚è∞ Timeline: 17. April Angriff, 26. April Bekanntgabe, 23 Tage Ausfallzeit',
                'maersk-notpetya': '‚è∞ Timeline: 27. Juni Infektion, 10 Tage Totalausfall, 300M$ Schaden',
                'pharma-ransomware': '‚è∞ Timeline: M√§rz 2020 Beginn, Pandemie-Dauer, Millionen Leben gef√§hrdet',
                'opm-hack': '‚è∞ Timeline: 2014 Beginn, √ºber 1 Jahr unentdeckt, Juni 2015 Aufdeckung',
                'mcdonalds-app': '‚è∞ Timeline: API seit Monaten offen, 2 Tage f√ºr Patch nach Meldung',
                'university-ransomware': '‚è∞ Timeline: 2 Wochen vor Pr√ºfungen, 5 Tage Wiederherstellung, Semester gerettet',
                'capital-one': '‚è∞ Timeline: M√§rz-Juli 2019 Zugang, 4 Monate unentdeckt, GitHub-Post f√ºhrt zu Verhaftung',
                'dusseldorf-hospital': '‚è∞ Timeline: 18:45 Infektion, 20:30 Patient-Umleitung, 03:20 Todesfall'
            };
            
            alert(responses[currentCase.id] || '‚è∞ Timeline: Angriff begann vor 3 Tagen, Ausbreitung √ºber 48 Stunden.');
        }

        // Event Listeners hinzuf√ºgen
        document.addEventListener('DOMContentLoaded', function() {
            // Start-Button
            const startBtn = document.getElementById('start-btn');
            if (startBtn) {
                startBtn.addEventListener('click', startExam);
            }

            // Case Studies Button
            const caseStudiesBtn = document.getElementById('case-studies-btn');
            if (caseStudiesBtn) {
                caseStudiesBtn.addEventListener('click', showCaseStudies);
            }

            // Team Mode Button
            const teamModeBtn = document.getElementById('team-mode-btn');
            if (teamModeBtn) {
                teamModeBtn.addEventListener('click', showTeamMode);
            }

            // Leaderboard Button
            const leaderboardBtn = document.getElementById('leaderboard-btn');
            if (leaderboardBtn) {
                leaderboardBtn.addEventListener('click', showLeaderboard);
            }

            // Team name input listener
            const teamNameInput = document.getElementById('team-name');
            if (teamNameInput) {
                teamNameInput.addEventListener('input', updateRoleDisplay);
            }
            
            // Navigation Buttons
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const finishBtn = document.getElementById('finish-btn');
            
            if (prevBtn) prevBtn.addEventListener('click', () => examEngine.previousQuestion());
            if (nextBtn) nextBtn.addEventListener('click', () => examEngine.nextQuestion());
            if (finishBtn) finishBtn.addEventListener('click', () => examEngine.finishExam());
            
            // Enter-Taste im Namensfeld
            const nameInput = document.getElementById('participant-name');
            if (nameInput) {
                nameInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        startExam();
                    }
                });
            }
        });

        // Advanced Team Mode System
        let teamData = {
            name: '',
            members: [],
            score: 0,
            currentChallenge: null,
            challengeStartTime: null
        };

        let selectedRoles = [];
        let challengeTimer = null;
        let playerStats = JSON.parse(localStorage.getItem('playerStats')) || {
            name: '',
            totalScore: 0,
            casesCompleted: 0,
            achievements: [],
            teamChallenges: 0
        };

        const roles = {
            'incident-commander': { name: 'Incident Commander', icon: 'üéØ' },
            'forensic-analyst': { name: 'Forensic Analyst', icon: 'üîç' },
            'security-engineer': { name: 'Security Engineer', icon: 'üõ°Ô∏è' },
            'communications': { name: 'Communications', icon: 'üì¢' }
        };

        const achievements = [
            { id: 'first-case', name: 'Erster Fall', icon: 'üèÅ', description: 'Ersten Fall erfolgreich gel√∂st', unlocked: false },
            { id: 'speed-demon', name: 'Geschwindigkeitsteufel', icon: '‚ö°', description: 'Fall in unter 5 Minuten gel√∂st', unlocked: false },
            { id: 'expert-level', name: 'Experte', icon: 'üß†', description: 'Experten-Fall gemeistert', unlocked: false },
            { id: 'team-player', name: 'Teamplayer', icon: 'üë•', description: 'Erste Team-Challenge absolviert', unlocked: false },
            { id: 'forensic-master', name: 'Forensik-Meister', icon: 'üîç', description: 'Alle Forensik-Tools verwendet', unlocked: false },
            { id: 'high-scorer', name: 'High Scorer', icon: 'üèÜ', description: '√úber 5000 Punkte erreicht', unlocked: false },
            { id: 'perfectionist', name: 'Perfektionist', icon: 'üíØ', description: '100% korrekte Antworten in einem Fall', unlocked: false },
            { id: 'incident-commander', name: 'Incident Commander', icon: 'üéØ', description: 'Als Incident Commander eine Challenge geleitet', unlocked: false }
        ];

        function showTeamMode() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('team-mode-screen').style.display = 'block';
        }

        function showLeaderboard() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('leaderboard-screen').style.display = 'block';
            loadLeaderboards();
            loadAchievements();
        }

        function selectRole(roleId) {
            if (selectedRoles.includes(roleId)) {
                selectedRoles = selectedRoles.filter(r => r !== roleId);
            } else if (selectedRoles.length < 4) {
                selectedRoles.push(roleId);
            } else {
                alert('Maximal 4 Rollen k√∂nnen ausgew√§hlt werden.');
                return;
            }

            updateRoleDisplay();
        }

        function updateRoleDisplay() {
            document.querySelectorAll('.role-card').forEach(card => {
                card.classList.remove('selected');
            });

            selectedRoles.forEach(roleId => {
                const card = Array.from(document.querySelectorAll('.role-card')).find(c => 
                    c.getAttribute('onclick').includes(roleId)
                );
                if (card) card.classList.add('selected');
            });

            const teamMembersDiv = document.getElementById('team-members');
            teamMembersDiv.innerHTML = selectedRoles.map(roleId => 
                `<div class="team-member">${roles[roleId].icon} ${roles[roleId].name}</div>`
            ).join('');

            const startBtn = document.getElementById('start-team-btn');
            if (selectedRoles.length >= 2 && document.getElementById('team-name').value.trim()) {
                startBtn.style.display = 'block';
            } else {
                startBtn.style.display = 'none';
            }
        }

        function startTeamChallenge() {
            const teamName = document.getElementById('team-name').value.trim();
            if (!teamName || selectedRoles.length < 2) {
                alert('Bitte geben Sie einen Team-Namen ein und w√§hlen Sie mindestens 2 Rollen.');
                return;
            }

            teamData.name = teamName;
            teamData.members = selectedRoles.map(roleId => roles[roleId]);
            teamData.score = 0;
            teamData.challengeStartTime = new Date();

            document.getElementById('team-setup').style.display = 'none';
            document.getElementById('team-challenge').style.display = 'block';
            document.getElementById('team-display-name').textContent = teamName;
            document.getElementById('team-score').textContent = '0';

            startChallengeTimer();
            initializeAdvancedTools();
            
            // Achievement unlock
            unlockAchievement('team-player');
        }

        function startChallengeTimer() {
            let timeLeft = 30 * 60; // 30 minutes
            challengeTimer = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('challenge-timer').textContent = 
                    `${minutes}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(challengeTimer);
                    finishTeamChallenge();
                }
            }, 1000);
        }

        function finishTeamChallenge() {
            clearInterval(challengeTimer);
            playerStats.teamChallenges++;
            playerStats.totalScore += teamData.score;
            
            // Save team score to leaderboard
            let teamLeaderboard = JSON.parse(localStorage.getItem('teamLeaderboard')) || [];
            teamLeaderboard.push({
                name: teamData.name,
                score: teamData.score,
                members: teamData.members.length,
                date: new Date().toLocaleDateString()
            });
            teamLeaderboard.sort((a, b) => b.score - a.score);
            teamLeaderboard = teamLeaderboard.slice(0, 10); // Keep top 10
            localStorage.setItem('teamLeaderboard', JSON.stringify(teamLeaderboard));
            
            savePlayerStats();
            alert(`Team-Challenge beendet! Finale Punktzahl: ${teamData.score}`);
        }

        // Advanced Forensic Tools
        function deepLogAnalysis() {
            const findings = [
                "üîç Advanced Log Correlation: Suspicious pattern detected across 247 hosts",
                "üìä Behavioral Analysis: Anomalous user login times outside business hours",
                "üîó Chain of Events: Initial breach ‚Üí lateral movement ‚Üí data exfiltration",
                "‚ö†Ô∏è IOCs Identified: 15 malicious IPs, 8 suspicious file hashes",
                "üïê Timeline Reconstruction: Attack lasted 72 hours, 15 minutes downtime"
            ];
            addToolFinding('forensics-findings', findings[Math.floor(Math.random() * findings.length)]);
            updateTeamScore(50);
        }

        function malwareReverse() {
            const findings = [
                "üß¨ Malware Family: Custom RAT based on open-source framework",
                "üîê Encryption: AES-256 with RSA-2048 key exchange",
                "üì° C2 Communication: DNS tunneling via legitimate domains",
                "üéØ Capabilities: Keylogging, screen capture, file exfiltration",
                "üè¥ Attribution: Code similarities to previous APT29 campaigns"
            ];
            addToolFinding('forensics-findings', findings[Math.floor(Math.random() * findings.length)]);
            updateTeamScore(75);
        }

        function memoryDump() {
            const findings = [
                "üíæ Memory Analysis: Injected DLL found in explorer.exe process",
                "üîí Credential Harvesting: 47 plaintext passwords extracted",
                "üåê Network Connections: Hidden backdoor on port 4444",
                "üìù Registry Analysis: Persistence mechanisms via Run keys",
                "üß© Process Hollowing: Legitimate process hijacked for payload execution"
            ];
            addToolFinding('forensics-findings', findings[Math.floor(Math.random() * findings.length)]);
            updateTeamScore(100);
            unlockAchievement('forensic-master');
        }

        function networkTopology() {
            const findings = [
                "üó∫Ô∏è Network Map: 247 active hosts, 15 critical servers identified",
                "üöß Segmentation Analysis: Poor isolation between DMZ and internal network",
                "üîç VLAN Discovery: 12 VLANs, 3 with default configurations",
                "üìä Traffic Flow: Unusual data patterns to external IPs",
                "‚ö° Bottlenecks: Network congestion during attack window"
            ];
            addToolFinding('network-findings', findings[Math.floor(Math.random() * findings.length)]);
            updateTeamScore(60);
        }

        function trafficAnalysis() {
            const findings = [
                "üìà Bandwidth Spike: 500GB data transfer at 03:00 AM",
                "üåê Protocol Analysis: Unusual HTTPS traffic to non-business domains",
                "üìä Flow Records: Persistent connections to suspicious IPs",
                "üîç DPI Results: Encrypted tunnels bypassing firewall rules",
                "‚ö†Ô∏è Anomaly Detection: 847% increase in outbound connections"
            ];
            addToolFinding('network-findings', findings[Math.floor(Math.random() * findings.length)]);
            updateTeamScore(70);
        }

        function threatHunting() {
            const findings = [
                "üéØ Hunt Results: 12 compromised endpoints identified",
                "üîç TTPs Observed: Living-off-the-land techniques detected",
                "üìä MITRE ATT&CK: T1055 (Process Injection), T1027 (Obfuscation)",
                "üè¥ Campaign Tracking: Operation matches 'SilentNight' indicators",
                "‚ö° Active Threats: 3 ongoing Command & Control sessions"
            ];
            addToolFinding('network-findings', findings[Math.floor(Math.random() * findings.length)]);
            updateTeamScore(90);
        }

        function oscintLookup() {
            const findings = [
                "üîé Domain Intelligence: Registered 2 days before attack",
                "üåç Geolocation: C2 servers traced to bulletproof hosting",
                "üìä Reputation Analysis: 15 security vendors flagged as malicious",
                "üîó Infrastructure Links: Connected to 5 previous campaigns",
                "üì± Social Media: Threat actor discussions on underground forums"
            ];
            addToolFinding('intelligence-findings', findings[Math.floor(Math.random() * findings.length)]);
            updateTeamScore(55);
        }

        function iocAnalysis() {
            const findings = [
                "‚ö†Ô∏è IOC Enrichment: 247 related indicators discovered",
                "üîç File Analysis: Malware samples submitted to sandbox",
                "üìä Threat Feeds: Matches 12 commercial intelligence sources",
                "üè¥ Campaign Attribution: High confidence APT29 attribution",
                "‚ö° Real-time Alerts: 5 new IOCs detected in last hour"
            ];
            addToolFinding('intelligence-findings', findings[Math.floor(Math.random() * findings.length)]);
            updateTeamScore(65);
        }

        function attributionAnalysis() {
            const findings = [
                "üè¥ Attribution Confidence: 85% - State-sponsored APT group",
                "üîç TTPs Overlap: 12 techniques match previous campaigns",
                "üåç Infrastructure: Hosting pattern consistent with APT29",
                "üìä Code Analysis: Unique compile timestamps suggest Moscow timezone",
                "‚ö° Geopolitical Context: Attack aligns with recent diplomatic tensions"
            ];
            addToolFinding('intelligence-findings', findings[Math.floor(Math.random() * findings.length)]);
            updateTeamScore(85);
        }

        function containmentPlan() {
            const plans = [
                "üöß Network Isolation: 47 infected hosts quarantined",
                "üîí Account Lockdown: 152 compromised credentials disabled",
                "üìä Service Shutdown: Non-critical systems taken offline",
                "‚ö° Firewall Rules: 27 malicious IPs blocked",
                "üõ°Ô∏è Endpoint Protection: EDR agents deployed to 500+ systems"
            ];
            addToolFinding('response-findings', plans[Math.floor(Math.random() * plans.length)]);
            updateTeamScore(80);
        }

        function stakeholderComms() {
            const comms = [
                "üì¢ Executive Briefing: CEO/CISO notification sent",
                "üìä Status Dashboard: Real-time incident metrics published",
                "‚öñÔ∏è Legal Notification: Data breach counsel engaged",
                "üì± Customer Communication: Proactive disclosure prepared",
                "üåç Media Response: PR team briefed on incident scope"
            ];
            addToolFinding('response-findings', comms[Math.floor(Math.random() * comms.length)]);
            updateTeamScore(60);
        }

        function recoveryPlan() {
            const plans = [
                "üîÑ System Restoration: 247 clean images prepared for deployment",
                "üìä Backup Validation: 85% of critical data recoverable",
                "‚ö° Recovery Timeline: 72 hours for full operational capability",
                "üîí Security Hardening: 47 configuration improvements implemented",
                "üìã Lessons Learned: Post-incident review scheduled"
            ];
            addToolFinding('response-findings', plans[Math.floor(Math.random() * plans.length)]);
            updateTeamScore(95);
        }

        function addToolFinding(stationId, finding) {
            const station = document.getElementById(stationId);
            station.innerHTML += `<div style="margin: 5px 0; border-left: 3px solid #3498db; padding-left: 10px;">${finding}</div>`;
            station.scrollTop = station.scrollHeight;
        }

        function updateTeamScore(points) {
            teamData.score += points;
            document.getElementById('team-score').textContent = teamData.score;
            
            const scoreElement = document.getElementById('team-score');
            scoreElement.style.color = '#27ae60';
            scoreElement.style.transform = 'scale(1.2)';
            setTimeout(() => {
                scoreElement.style.color = '';
                scoreElement.style.transform = '';
            }, 500);
        }

        function sendTeamMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            if (!message) return;

            const chatMessages = document.getElementById('chat-messages');
            const timestamp = new Date().toLocaleTimeString();
            chatMessages.innerHTML += `
                <div style="margin: 8px 0; padding: 8px; background: #ecf0f1; border-radius: 5px;">
                    <strong>[${timestamp}] Team:</strong> ${message}
                </div>
            `;
            chatMessages.scrollTop = chatMessages.scrollHeight;
            input.value = '';
        }

        function initializeAdvancedTools() {
            ['forensics-findings', 'network-findings', 'intelligence-findings', 'response-findings'].forEach(id => {
                document.getElementById(id).innerHTML = '<div style="opacity: 0.6;">Verwenden Sie die Tools um Erkenntnisse zu sammeln...</div>';
            });
        }

        // Scoring and Achievement System
        function unlockAchievement(achievementId) {
            const achievement = achievements.find(a => a.id === achievementId);
            if (achievement && !playerStats.achievements.includes(achievementId)) {
                playerStats.achievements.push(achievementId);
                achievement.unlocked = true;
                savePlayerStats();
                
                // Show achievement notification
                showAchievementNotification(achievement);
            }
        }

        function showAchievementNotification(achievement) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #ffd700, #ffed4e);
                color: #333;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                z-index: 10000;
                animation: slideIn 0.5s ease;
            `;
            notification.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 5px;">üèÜ Achievement Unlocked!</div>
                <div>${achievement.icon} ${achievement.name}</div>
                <div style="font-size: 0.8em; opacity: 0.8;">${achievement.description}</div>
            `;
            
            document.body.appendChild(notification);
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        function savePlayerStats() {
            localStorage.setItem('playerStats', JSON.stringify(playerStats));
        }

        function loadLeaderboards() {
            // Individual leaderboard
            let individualLeaderboard = JSON.parse(localStorage.getItem('individualLeaderboard')) || [];
            const individualDiv = document.getElementById('individual-leaderboard');
            individualDiv.innerHTML = individualLeaderboard.slice(0, 10).map((player, index) => `
                <div class="leaderboard-row ${index < 3 ? `rank-${index + 1}` : ''}">
                    <span>${index + 1}</span>
                    <span>${player.name}</span>
                    <span>${player.score}</span>
                    <span>${player.cases}</span>
                </div>
            `).join('') || '<div style="padding: 20px; text-align: center; color: #7f8c8d;">Noch keine Eintr√§ge</div>';

            // Team leaderboard
            let teamLeaderboard = JSON.parse(localStorage.getItem('teamLeaderboard')) || [];
            const teamDiv = document.getElementById('team-leaderboard');
            teamDiv.innerHTML = teamLeaderboard.slice(0, 10).map((team, index) => `
                <div class="leaderboard-row ${index < 3 ? `rank-${index + 1}` : ''}">
                    <span>${index + 1}</span>
                    <span>${team.name}</span>
                    <span>${team.score}</span>
                    <span>${team.members} Mitglieder</span>
                </div>
            `).join('') || '<div style="padding: 20px; text-align: center; color: #7f8c8d;">Noch keine Teams</div>';
        }

        function loadAchievements() {
            const achievementsGrid = document.getElementById('achievements-grid');
            achievementsGrid.innerHTML = achievements.map(achievement => `
                <div class="achievement-card ${playerStats.achievements.includes(achievement.id) ? 'unlocked' : ''}">
                    <div class="achievement-icon">${achievement.icon}</div>
                    <h4>${achievement.name}</h4>
                    <p>${achievement.description}</p>
                    ${playerStats.achievements.includes(achievement.id) ? '<div style="font-weight: bold; color: #27ae60;">‚úì Freigeschaltet</div>' : '<div style="opacity: 0.6;">üîí Gesperrt</div>'}
                </div>
            `).join('');
        }

        // Enhanced case completion with scoring
        function completeCaseStudy() {
            const baseScore = currentCase.difficulty === 'easy' ? 200 : 
                             currentCase.difficulty === 'medium' ? 400 : 600;
            
            let finalScore = baseScore;
            
            // Time bonus (under 10 minutes)
            const timeSpent = (new Date() - examEngine.startTime) / 1000 / 60;
            if (timeSpent < 10) {
                finalScore += 100;
                if (timeSpent < 5) {
                    unlockAchievement('speed-demon');
                }
            }
            
            // Difficulty bonus
            if (currentCase.difficulty === 'hard') {
                unlockAchievement('expert-level');
            }
            
            playerStats.totalScore += finalScore;
            playerStats.casesCompleted++;
            
            if (playerStats.casesCompleted === 1) {
                unlockAchievement('first-case');
            }
            
            if (playerStats.totalScore >= 5000) {
                unlockAchievement('high-scorer');
            }
            
            savePlayerStats();
            
            document.getElementById('case-questions').innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <h2>üéâ Fall erfolgreich bearbeitet!</h2>
                    <div style="font-size: 1.5em; margin: 20px 0; color: #27ae60;">
                        +${finalScore} Punkte erhalten!
                    </div>
                    <p>Sie haben alle Schritte der Incident Response durchlaufen:</p>
                    <ul style="text-align: left; max-width: 400px; margin: 20px auto;">
                        <li>‚úÖ Sofortma√ünahmen eingeleitet</li>
                        <li>‚úÖ Ursachen identifiziert</li>
                        <li>‚úÖ Pr√§ventionsma√ünahmen definiert</li>
                    </ul>
                    <div style="margin-top: 20px; color: #7f8c8d;">
                        Gesamtpunktzahl: ${playerStats.totalScore} | F√§lle gel√∂st: ${playerStats.casesCompleted}
                    </div>
                </div>
            `;
            document.getElementById('next-step-btn').style.display = 'none';
        }
    </script>
</body>
</html>
